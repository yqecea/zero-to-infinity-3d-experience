<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Zero to Infinity | The Complete Black Hole Guide (Expanded Edition)</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700;800&family=Inter:wght@200;300;400;500;600;700&family=JetBrains+Mono:wght@300;400&display=swap"
        rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Cinzel', 'serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        zinc: {
                            850: '#1f1f22',
                            900: '#18181b',
                            950: '#09090b',
                        }
                    },
                    backgroundImage: {
                        'noise': "url('data:image/svg+xml,%3Csvg viewBox=\\"0 0 200 200\\" xmlns=\\"http://www.w3.org/2000/svg\\"%3E%3Cfilter id=\\"noiseFilter\\"%3E%3CfeTurbulence type=\\"fractalNoise\\" baseFrequency=\\"0.65\\" numOctaves=\\"3\\" stitchTiles=\\"stitch\\"/%3E%3C/filter%3E%3Crect width=\\"100%25\\" height=\\"100%25\\" filter=\\"url(%23noiseFilter)\\" opacity=\\"0.05\\"/%3E%3C/svg%3E')",
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            --bg-deep: #050505;
            --accent-silver: #d4d4d8;
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-bg: rgba(255, 255, 255, 0.02);
        }

        * {
            box-sizing: border-box;
        }

        /* CRITICAL: Disable normal scrolling for 3D fly-through */
        html,
        body {
            background: var(--bg-deep);
            color: #fff;
            overflow: hidden;
            height: 100vh;
            height: 100dvh;
            width: 100vw;
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            overscroll-behavior: none;
            -webkit-tap-highlight-color: transparent;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        .font-cinzel {
            font-family: 'Cinzel', serif;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* 3D Scene Container - Full viewport background */
        #tunnel-scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
        }

        /* Vignette overlay for depth effect */
        .tunnel-vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 1;
            background: radial-gradient(ellipse at center, transparent 30%, rgba(0, 0, 0, 0.8) 100%);
        }

        /* HUD Section Styles - Fixed overlay with fade transitions */
        .hud-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        .hud-section.active {
            opacity: 1;
            pointer-events: auto;
        }

        .hud-section .hud-content {
            flex: 1;
            padding-top: 6rem;
            padding-bottom: 4rem;
        }

        /* Depth Progress Indicator */
        .depth-indicator {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .depth-track {
            width: 4px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }

        .depth-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(to top, #000, #a1a1aa, #fff);
            border-radius: 2px;
            transition: height 0.1s ease-out;
        }

        .depth-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }

        /* Section Labels in depth indicator */
        .depth-markers {
            position: absolute;
            left: 12px;
            top: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .depth-marker {
            font-size: 0.5rem;
            color: rgba(255, 255, 255, 0.3);
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            cursor: pointer;
            transition: color 0.3s;
        }

        .depth-marker:hover {
            color: white;
        }

        .depth-marker.active {
            color: #ffffff;
        }

        /* Scroll Hint */
        .scroll-hint {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            opacity: 1;
            transition: opacity 0.5s;
        }

        .scroll-hint.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .scroll-hint-text {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 0.2em;
            font-family: 'JetBrains Mono', monospace;
        }

        .scroll-hint-arrow {
            width: 24px;
            height: 24px;
            border-right: 2px solid rgba(255, 255, 255, 0.5);
            border-bottom: 2px solid rgba(255, 255, 255, 0.5);
            transform: rotate(45deg);
            animation: bounce-down 2s infinite;
        }

        @keyframes bounce-down {

            0%,
            100% {
                transform: rotate(45deg) translateY(0);
                opacity: 1;
            }

            50% {
                transform: rotate(45deg) translateY(10px);
                opacity: 0.5;
            }
        }

        /* Speed Lines Effect */
        .speed-lines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 2;
            opacity: 0;
            transition: opacity 0.3s;
            background: repeating-linear-gradient(0deg,
                    transparent 0px,
                    transparent 50px,
                    rgba(255, 255, 255, 0.02) 50px,
                    rgba(255, 255, 255, 0.02) 51px);
        }

        .speed-lines.active {
            opacity: 1;
        }

        /* Typography Utilities */
        .text-silver-gradient {
            background: linear-gradient(to right, #ffffff, #e4e4e7, #a1a1aa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .text-justify-academic {
            text-align: justify;
            text-justify: inter-word;
        }

        /* Glass Card Enhanced */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);
            --mouse-x: 50%;
            --mouse-y: 50%;
            --spotlight-size: 500px;
        }

        .glass-card:hover {
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.5);
        }

        /* Spotlight Effect */
        .glass-card::before {
            content: "";
            position: absolute;
            inset: 0;
            z-index: 1;
            background: radial-gradient(var(--spotlight-size) circle at var(--mouse-x) var(--mouse-y), rgba(255, 255, 255, 0.06), transparent 40%);
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none;
            mix-blend-mode: overlay;
        }

        .glass-card:hover::before {
            opacity: 1;
        }

        .glass-card>* {
            position: relative;
            z-index: 2;
        }

        /* Equation Box */
        .equation-box {
            font-family: 'Times New Roman', serif;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .equation-box::after {
            content: "EQ";
            position: absolute;
            top: 0;
            right: 0;
            font-size: 0.5rem;
            padding: 0.2rem 0.4rem;
            background: rgba(255, 255, 255, 0.1);
            color: #888;
        }

        /* Horizontal Timeline - Now uses keyboard navigation */
        .horizontal-timeline-container {
            width: 100%;
            overflow-x: auto;
            padding-bottom: 2rem;
            mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
        }

        .horizontal-timeline {
            display: flex;
            gap: 2rem;
            width: max-content;
            padding: 0 2rem;
        }

        .timeline-card {
            min-width: 300px;
            max-width: 300px;
            flex-shrink: 0;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 1rem;
            position: relative;
        }

        .timeline-card::before {
            content: '';
            position: absolute;
            top: -3px;
            left: 0;
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px white;
        }

        /* Timeline Navigation Arrows */
        .timeline-nav {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .timeline-nav-btn {
            width: 36px;
            height: 36px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .timeline-nav-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.4);
        }

        /* Dashboard Grid (Anatomy) */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        @media (min-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 350px 1fr 350px;
            }

            .sticky-center {
                position: relative;
                height: auto;
            }
        }

        /* Deep Dive Accordion */
        details.deep-dive {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 0.75rem;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        details.deep-dive[open] {
            background: rgba(255, 255, 255, 0.03);
            border-color: rgba(255, 255, 255, 0.1);
        }

        details.deep-dive summary {
            padding: 1rem;
            cursor: pointer;
            list-style: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-family: 'Cinzel', serif;
            font-size: 0.9rem;
            color: #a1a1aa;
        }

        details.deep-dive summary:hover {
            color: white;
        }

        details.deep-dive summary::after {
            content: '+';
            font-size: 1.2rem;
            font-weight: 300;
            transition: transform 0.3s;
        }

        details.deep-dive[open] summary::after {
            transform: rotate(45deg);
        }

        .deep-dive-content {
            padding: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            color: #d4d4d8;
            line-height: 1.8;
            font-size: 0.95rem;
        }

        /* Hero Background - Seamless fullscreen with radial mask */
        .hero-bg-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .hero-bg-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center;
            opacity: 0.85;
            filter: saturate(1.1) contrast(1.05);
            /* Tighter radial mask for seamless blend without over-scaling */
            mask-image: radial-gradient(ellipse 70% 70% at center, black 40%, transparent 85%);
            -webkit-mask-image: radial-gradient(ellipse 70% 70% at center, black 40%, transparent 85%);
        }


        /* Data Viz Bars */
        .data-bar-container {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .data-bar-fill {
            height: 100%;
            background: white;
            border-radius: 2px;
            position: relative;
        }

        .data-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 10px;
            background: linear-gradient(to right, transparent, white);
            filter: blur(2px);
        }

        /* Nav Blur - Updated for fixed HUD */
        .nav-blur {
            backdrop-filter: blur(12px);
            background: rgba(5, 5, 5, 0.6);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 200;
        }

        /* 3D Canvas */
        #blackhole-canvas {
            width: 100%;
            height: 100%;
        }

        /* Animation Classes */
        .reveal-text {
            clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0% 100%);
            transform: translateY(100%);
            opacity: 0;
            transition: all 1.2s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .reveal-text.revealed {
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
            transform: translateY(0);
            opacity: 1;
        }

        /* Hero Title Styling - Maximum Contrast with Glow */
        .hero-title {
            position: relative;
            z-index: 10;
        }

        .hero-text-main {
            color: #ffffff;
            text-shadow:
                0 0 20px rgba(0, 0, 0, 0.9),
                0 0 40px rgba(0, 0, 0, 0.8),
                0 0 60px rgba(0, 0, 0, 0.7),
                0 2px 4px rgba(0, 0, 0, 1),
                0 4px 8px rgba(0, 0, 0, 0.9),
                0 8px 16px rgba(0, 0, 0, 0.8),
                2px 2px 0 rgba(0, 0, 0, 0.5),
                -2px -2px 0 rgba(0, 0, 0, 0.5);
            -webkit-text-stroke: 1px rgba(255, 255, 255, 0.3);
            filter: drop-shadow(0 0 30px rgba(0, 0, 0, 0.9));
        }

        .hero-text-main.text-silver-gradient {
            background: linear-gradient(135deg, #ffffff 0%, #e4e4e7 25%, #ffffff 50%, #a1a1aa 75%, #ffffff 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 4s linear infinite;
            filter: drop-shadow(0 0 20px rgba(0, 0, 0, 0.9)) drop-shadow(0 4px 8px rgba(0, 0, 0, 1));
        }

        .hero-text-sub {
            color: rgba(200, 200, 200, 0.9);
            text-shadow:
                0 0 15px rgba(0, 0, 0, 0.9),
                0 0 30px rgba(0, 0, 0, 0.8),
                0 2px 4px rgba(0, 0, 0, 1);
        }

        /* Hero section backdrop enhancement */
        #hero .hud-content>div {
            position: relative;
        }

        #hero .hud-content>div::before {
            content: '';
            position: absolute;
            inset: -50px;
            background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.4) 0%, transparent 70%);
            z-index: -1;
            pointer-events: none;
        }

        /* Glitch Effect */
        .glitch-text {
            position: relative;
        }

        .glitch-text::before,
        .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #050505;
        }

        .glitch-text::before {
            left: 2px;
            text-shadow: -1px 0 #ff00c1;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim-1 5s infinite linear alternate-reverse;
        }

        .glitch-text::after {
            left: -2px;
            text-shadow: -1px 0 #00fff9;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim-2 5s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% {
                clip: rect(30px, 9999px, 10px, 0);
            }

            5% {
                clip: rect(70px, 9999px, 90px, 0);
            }

            10% {
                clip: rect(10px, 9999px, 30px, 0);
            }

            15% {
                clip: rect(80px, 9999px, 20px, 0);
            }

            20% {
                clip: rect(40px, 9999px, 60px, 0);
            }

            100% {
                clip: rect(60px, 9999px, 5px, 0);
            }
        }

        @keyframes glitch-anim-2 {
            0% {
                clip: rect(20px, 9999px, 80px, 0);
            }

            5% {
                clip: rect(90px, 9999px, 10px, 0);
            }

            10% {
                clip: rect(50px, 9999px, 20px, 0);
            }

            15% {
                clip: rect(10px, 9999px, 90px, 0);
            }

            20% {
                clip: rect(60px, 9999px, 40px, 0);
            }

            100% {
                clip: rect(30px, 9999px, 70px, 0);
            }
        }

        /* Custom Grids */
        .key-figures-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        @media (min-width: 640px) {
            .key-figures-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Watermarks */
        .watermark-huge {
            position: absolute;
            font-size: 20vw;
            font-family: 'Cinzel', serif;
            color: rgba(255, 255, 255, 0.01);
            z-index: 0;
            pointer-events: none;
            line-height: 1;
            white-space: nowrap;
        }

        /* Custom scrollbar for HUD sections */
        .hud-section::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        .hud-section::-webkit-scrollbar-track {
            background: transparent;
        }

        .hud-section::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        .hud-section::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        /* ============================================= */
        /* INFINITE ANIMATIONS - MAKE EVERYTHING DYNAMIC */
        /* ============================================= */

        /* Floating Animation */
        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes floatSlow {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-15px) rotate(1deg);
            }
        }

        @keyframes floatReverse {

            0%,
            100% {
                transform: translateY(-10px);
            }

            50% {
                transform: translateY(0px);
            }
        }

        /* Pulsing Animations */
        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.02);
            }
        }

        @keyframes pulseGlow {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(255, 255, 255, 0.1);
            }

            50% {
                box-shadow: 0 0 25px rgba(255, 255, 255, 0.2), 0 0 50px rgba(255, 255, 255, 0.1);
            }
        }

        @keyframes pulseBorder {

            0%,
            100% {
                border-color: rgba(255, 255, 255, 0.1);
            }

            50% {
                border-color: rgba(255, 255, 255, 0.3);
            }
        }

        /* Shimmer Effect */
        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }

            100% {
                background-position: 200% 0;
            }
        }

        @keyframes shimmerGradient {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Rotation Animations */
        @keyframes rotateSlow {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes rotateReverse {
            from {
                transform: rotate(360deg);
            }

            to {
                transform: rotate(0deg);
            }
        }

        @keyframes wobble {

            0%,
            100% {
                transform: rotate(-1deg);
            }

            50% {
                transform: rotate(1deg);
            }
        }

        /* Scale Animations */
        @keyframes breathe {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.03);
            }
        }

        @keyframes heartbeat {

            0%,
            100% {
                transform: scale(1);
            }

            25% {
                transform: scale(1.05);
            }

            50% {
                transform: scale(1);
            }

            75% {
                transform: scale(1.03);
            }
        }

        /* Slide Animations */
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Fade Animations */
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes fadeInBlur {
            from {
                opacity: 0;
                filter: blur(10px);
            }

            to {
                opacity: 1;
                filter: blur(0);
            }
        }

        /* Gradient Animation for Text */
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Border Animation */
        @keyframes borderDance {

            0%,
            100% {
                border-color: rgba(255, 255, 255, 0.1);
            }

            25% {
                border-color: rgba(255, 150, 50, 0.3);
            }

            50% {
                border-color: rgba(100, 200, 255, 0.3);
            }

            75% {
                border-color: rgba(200, 100, 255, 0.3);
            }
        }

        /* Data Bar Fill Animation */
        @keyframes dataBarPulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        @keyframes dataBarGlow {

            0%,
            100% {
                filter: brightness(1);
            }

            50% {
                filter: brightness(1.3);
            }
        }

        /* Particle Animation */
        @keyframes particleDrift {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }

            100% {
                transform: translate(100px, -100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Wave Animation */
        @keyframes wave {

            0%,
            100% {
                transform: translateY(0) scaleY(1);
            }

            50% {
                transform: translateY(-5px) scaleY(1.05);
            }
        }

        /* Ring Pulse Animation */
        @keyframes ringPulse {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }

            50% {
                transform: scale(1.1);
                opacity: 0.5;
            }

            100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }

        /* Text Flicker */
        @keyframes textFlicker {

            0%,
            100% {
                opacity: 1;
            }

            92% {
                opacity: 1;
            }

            93% {
                opacity: 0.8;
            }

            94% {
                opacity: 1;
            }

            96% {
                opacity: 0.9;
            }

            97% {
                opacity: 1;
            }
        }

        /* Typing Cursor */
        @keyframes blink {

            0%,
            50% {
                border-color: transparent;
            }

            51%,
            100% {
                border-color: white;
            }
        }

        /* ============================================= */
        /* OPTIMIZED ANIMATIONS - GPU ACCELERATED */
        /* ============================================= */

        /* GPU Acceleration for animated elements */
        .glass-card,
        .timeline-card,
        .equation-box,
        [data-lucide] {
            will-change: transform;
            transform: translateZ(0);
            backface-visibility: hidden;
        }

        /* Glass Cards - HOVER ONLY animations (saves CPU) */
        .glass-card {
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
                box-shadow 0.4s ease;
        }

        .glass-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3),
                0 0 30px rgba(255, 255, 255, 0.1);
        }

        /* Timeline Cards - Hover animation only */
        .timeline-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .timeline-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .timeline-card::before {
            transition: transform 0.3s ease;
        }

        .timeline-card:hover::before {
            transform: scale(1.3);
        }

        /* Data Bars - No infinite animation, just transition */
        .data-bar-fill {
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Equation Box - Hover only */
        .equation-box {
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .equation-box:hover {
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        /* Key Figures - Hover animation */
        .key-figures-grid>div {
            transition: transform 0.3s ease;
        }

        .key-figures-grid>div:hover {
            transform: translateY(-5px);
        }

        /* Deep Dive Accordions - Transition only */
        details.deep-dive {
            transition: border-color 0.3s ease;
        }

        details.deep-dive:hover {
            border-color: rgba(255, 255, 255, 0.2);
        }

        /* Section Headers - Static gradient, shimmer on hover only */
        .hud-section h2 {
            background: linear-gradient(90deg, #fff, #a1a1aa, #fff);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: background-position 0.5s ease;
        }

        .hud-section h2:hover {
            background-position: 100% 0;
        }

        /* Badge/Tag - Hover only */
        .inline-flex.items-center.gap-2 {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .inline-flex.items-center.gap-2:hover {
            transform: translateY(-2px);
        }

        /* Depth Indicator - No constant animation */
        .depth-progress {
            transition: all 0.3s ease;
        }

        .depth-marker {
            transition: transform 0.2s ease, opacity 0.2s ease;
        }

        .depth-marker.active {
            transform: scale(1.2);
        }

        /* Nav Logo - Slow rotation only (one animation is ok) */
        .nav-blur .rounded-full.bg-gradient-to-br {
            animation: rotateSlow 30s linear infinite;
        }

        /* Hero Title - ONE subtle animation */
        #hero h1 .text-silver-gradient {
            background: linear-gradient(90deg, #fff, #e4e4e7, #a1a1aa, #e4e4e7, #fff);
            background-size: 200% auto;
            animation: shimmer 8s linear infinite;
        }

        /* Status Badge - Keep pulse but slower */
        .animate-pulse {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Images - Hover scale only, no constant animation */
        .glass-card img {
            transition: transform 0.5s ease;
        }

        .glass-card:hover img {
            transform: scale(1.05);
        }

        /* Singularity dots - Simple pulse */
        .w-1.h-1.bg-white,
        .w-1.h-1.bg-red-500 {
            animation: pulse 2s ease-in-out infinite;
        }

        /* Ring element - Simple border transition */
        .w-8.h-2.border.border-white {
            transition: border-color 0.3s ease;
        }

        /* Section cards - Hover transitions */
        #thermodynamics .glass-card,
        #frontier .glass-card {
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }

        #thermodynamics .glass-card:hover,
        #frontier .glass-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        /* Evidence images - Hover only */
        #evidence .group img,
        #evidence .grid .group img {
            transition: transform 0.5s ease;
        }

        #evidence .group:hover img {
            transform: scale(1.05);
        }

        /* Icons - No constant animation, hover only */
        [data-lucide] {
            transition: transform 0.2s ease;
        }

        [data-lucide]:hover {
            transform: scale(1.1);
        }

        /* Quote boxes - Transition only */
        .font-serif.italic {
            transition: opacity 0.5s ease;
        }

        /* Border dividers - No animation */
        .border-b.border-white\/10,
        .border-t.border-white\/5 {
            transition: border-color 0.3s ease;
        }

        /* Marquee - Only ONE moving element */
        .fixed.bottom-0 .flex.w-max {
            animation: scroll 40s linear infinite;
        }

        /* Reduce motion for users who prefer it */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Additional dynamic effects */

        /* Horizontal Rule Shimmer */
        hr,
        .h-px {
            animation: shimmer 4s linear infinite;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent, rgba(255, 255, 255, 0.2), transparent);
            background-size: 200% 100%;
        }

        /* Text Labels Subtle Animation */
        .text-xs.text-zinc-500.uppercase {
            animation: textFlicker 20s linear infinite;
        }

        /* Hero Button Pulsing */
        #hero-buttons>div {
            animation: breathe 4s ease-in-out infinite, pulseGlow 3s ease-in-out infinite;
        }

        /* History Section Specific */
        #history .grid>div {
            animation: slideInUp 0.8s ease-out backwards;
        }

        #history .grid>div:nth-child(1) {
            animation-delay: 0.1s;
        }

        #history .grid>div:nth-child(2) {
            animation-delay: 0.3s;
        }

        /* Formation Section Cards */
        #formation .grid>div {
            animation: float 6s ease-in-out infinite;
        }

        /* Rotating accretion disk visual in singularity cards */
        #anatomy .bg-black .rounded-full,
        #anatomy .bg-black .border {
            animation: rotateSlow 6s linear infinite;
        }

        /* ============================================= */
        /* MOBILE & TOUCH DEVICE OPTIMIZATIONS */
        /* ============================================= */

        /* Mobile Menu Open State */
        #mobile-menu.open {
            transform: translateX(0);
        }

        /* Depth Indicator Mobile Adjustments */
        @media (max-width: 768px) {
            .depth-indicator {
                right: 0.5rem;
                transform: translateY(-50%) scale(0.75);
            }

            .depth-markers {
                display: none;
            }

            .depth-track {
                height: 120px;
            }

            .depth-label {
                font-size: 0.5rem;
            }

            /* Scroll hint adjustments */
            .scroll-hint {
                bottom: 4rem;
            }

            .scroll-hint-text {
                font-size: 0.6rem;
            }

            /* Glass cards - larger touch targets */
            .glass-card {
                min-height: 60px;
            }

            /* Timeline cards touch-friendly */
            .timeline-card {
                min-width: 260px;
                padding: 1.25rem;
            }

            /* Hero text sizing */
            #hero h1 {
                font-size: 4rem !important;
            }

            /* Nav adjustments */
            .nav-blur {
                padding: 0 1rem;
            }
        }

        @media (max-width: 480px) {
            .depth-indicator {
                right: 0.25rem;
                transform: translateY(-50%) scale(0.6);
            }

            #hero h1 {
                font-size: 3rem !important;
            }

            .hud-section .hud-content {
                padding-left: 1rem;
                padding-right: 1rem;
            }
        }

        /* Touch device optimizations */
        @media (hover: none) and (pointer: coarse) {

            /* Disable hover-only effects on touch devices */
            .glass-card:hover {
                transform: none;
            }

            /* Make touch targets larger */
            .depth-marker {
                padding: 0.5rem;
                font-size: 1rem;
            }

            .timeline-nav-btn {
                width: 48px;
                height: 48px;
            }

            /* Enable active states instead of hover */
            .glass-card:active {
                transform: scale(0.98);
                border-color: rgba(255, 255, 255, 0.3);
            }

            .timeline-card:active {
                transform: translateY(-3px);
            }
        }

        /* Horizontal timeline touch scroll indicator */
        .horizontal-timeline-container {
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        /* Hide scrollbar on mobile but keep functionality */
        @media (max-width: 768px) {
            .horizontal-timeline-container::-webkit-scrollbar {
                display: none;
            }

            .horizontal-timeline-container {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
        }

        /* ============================================= */
        /* MOBILE PERFORMANCE MODE - RUTHLESS EFFICIENCY */
        /* ============================================= */
        /* State B: Targets stable 60 FPS on mobile devices */

        @media (max-width: 768px),
        (hover: none) and (pointer: coarse) {

            /* CRITICAL: Kill backdrop-filter blur - GPU destroyer */
            .glass-card {
                backdrop-filter: none !important;
                -webkit-backdrop-filter: none !important;
                background: rgba(15, 15, 15, 0.95) !important;
                border-color: rgba(255, 255, 255, 0.1) !important;
            }

            .nav-blur {
                backdrop-filter: none !important;
                -webkit-backdrop-filter: none !important;
                background: rgba(5, 5, 5, 0.98) !important;
            }

            /* Kill expensive text shadows and filters */
            .hero-text-main {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8) !important;
                -webkit-text-stroke: none !important;
                filter: none !important;
            }

            .hero-text-main.text-silver-gradient {
                animation: none !important;
                background: #ffffff !important;
                -webkit-background-clip: text !important;
                -webkit-text-fill-color: transparent !important;
                filter: none !important;
            }

            /* Disable ALL shimmer/gradient animations */
            .hud-section h2,
            .text-silver-gradient,
            hr,
            .h-px {
                animation: none !important;
            }

            /* Kill floating animations - save CPU cycles */
            #formation .grid>div,
            #history .grid>div {
                animation: none !important;
            }

            /* Disable glitch effects entirely */
            .glitch-text::before,
            .glitch-text::after {
                display: none !important;
            }

            /* Simplify hero backdrop */
            #hero .hud-content>div::before {
                display: none !important;
            }

            /* Reduce vignette complexity */
            .tunnel-vignette {
                background: radial-gradient(ellipse at center, transparent 50%, rgba(0, 0, 0, 0.6) 100%) !important;
            }

            /* Hide speed lines - pure visual fluff */
            .speed-lines {
                display: none !important;
            }

            /* Simplify data bars */
            .data-bar-fill::after {
                display: none !important;
            }

            /* Kill watermarks - invisible anyway on mobile */
            .watermark-huge {
                display: none !important;
            }

            /* Reduce hero button pulse intensity */
            #hero-buttons>div {
                animation: none !important;
            }

            /* Simplify equation boxes */
            .equation-box {
                box-shadow: none !important;
            }

            /* Kill card spotlight/tilt effects */
            .glass-card::before {
                display: none !important;
            }

            /* Reduce transition complexity */
            .glass-card,
            .timeline-card {
                transition: none !important;
            }

            /* Kill accretion disk rotation in anatomy */
            #anatomy .bg-black .rounded-full,
            #anatomy .bg-black .border {
                animation: none !important;
            }

            /* Disable pulse on status badges */
            .animate-pulse {
                animation: none !important;
            }

            /* Kill text flicker */
            .text-xs.text-zinc-500.uppercase {
                animation: none !important;
            }

            /* Simplify hero image rendering */
            .hero-bg-image {
                filter: none !important;
            }

            /* Reduce depth indicator complexity */
            .depth-progress {
                background: #ffffff !important;
                transition: height 0.2s linear !important;
            }

            /* Simplify scroll hint */
            .scroll-hint-arrow {
                animation: none !important;
            }
        }

        /* Ultra-aggressive mode for very low-end devices */
        @media (max-width: 480px) {

            /* Further reduce glass opacity for performance */
            .glass-card {
                background: rgba(10, 10, 10, 0.98) !important;
            }

            /* Hide hero background image entirely on very small screens */
            .hero-bg-container {
                opacity: 0.3 !important;
            }

            /* Simplify border animations */
            .pulseBorder,
            .borderDance {
                animation: none !important;
            }
        }
    </style>
</head>

<body class="antialiased selection:bg-white/20 selection:text-white">

    <!-- 3D Tunnel Scene Container -->
    <div id="tunnel-scene"></div>

    <!-- Tunnel Vignette Overlay -->
    <div class="tunnel-vignette"></div>

    <!-- Speed Lines Effect -->
    <div class="speed-lines" id="speedLines"></div>

    <!-- Depth Progress Indicator -->
    <div class="depth-indicator">
        <span class="depth-label">Depth</span>
        <div class="depth-track">
            <div class="depth-progress" id="depthProgress" style="height: 0%"></div>
        </div>
        <div class="depth-markers">
            <span class="depth-marker active" data-section="hero">●</span>
            <span class="depth-marker" data-section="history">●</span>
            <span class="depth-marker" data-section="anatomy">●</span>
            <span class="depth-marker" data-section="deep-dive">●</span>
            <span class="depth-marker" data-section="formation">●</span>
            <span class="depth-marker" data-section="thermodynamics">●</span>
            <span class="depth-marker" data-section="evidence">●</span>
            <span class="depth-marker" data-section="frontier">●</span>
        </div>
    </div>

    <!-- Scroll Hint -->
    <div class="scroll-hint" id="scrollHint">
        <span class="scroll-hint-text">Scroll to Fly Forward</span>
        <div class="scroll-hint-arrow"></div>
    </div>

    <!-- Navigation - Fixed overlay -->
    <nav class="nav-blur border-b border-white/5 transition-all duration-300" id="navbar">
        <div class="max-w-[1400px] mx-auto px-6 h-20 flex items-center justify-between">
            <a href="#" class="flex items-center gap-3 group" data-nav-home>
                <div
                    class="w-8 h-8 rounded-full bg-gradient-to-br from-white to-zinc-600 flex items-center justify-center shadow-[0_0_15px_rgba(255,255,255,0.3)] group-hover:scale-110 transition-transform">
                    <div class="w-2 h-2 bg-black rounded-full"></div>
                </div>
                <div class="flex flex-col">
                    <span class="text-lg font-cinzel font-bold tracking-tight text-white leading-none">ZERO TO
                        INFINITY</span>
                    <span class="text-[0.6rem] font-mono text-zinc-500 tracking-widest uppercase">3D Experience</span>
                </div>
            </a>

            <div class="hidden xl:flex items-center gap-8 text-xs font-medium tracking-widest uppercase text-zinc-500">
                <a href="#" data-nav-section="history"
                    class="hover:text-white transition-colors relative group">History<span
                        class="absolute -bottom-1 left-0 w-0 h-px bg-white transition-all group-hover:w-full"></span></a>
                <a href="#" data-nav-section="anatomy"
                    class="hover:text-white transition-colors relative group">Anatomy<span
                        class="absolute -bottom-1 left-0 w-0 h-px bg-white transition-all group-hover:w-full"></span></a>
                <a href="#" data-nav-section="deep-dive" class="hover:text-white transition-colors relative group">Deep
                    Dive<span
                        class="absolute -bottom-1 left-0 w-0 h-px bg-white transition-all group-hover:w-full"></span></a>
                <a href="#" data-nav-section="formation"
                    class="hover:text-white transition-colors relative group">Formation<span
                        class="absolute -bottom-1 left-0 w-0 h-px bg-white transition-all group-hover:w-full"></span></a>
                <a href="#" data-nav-section="thermodynamics"
                    class="hover:text-white transition-colors relative group">Thermodynamics<span
                        class="absolute -bottom-1 left-0 w-0 h-px bg-white transition-all group-hover:w-full"></span></a>
                <a href="#" data-nav-section="evidence"
                    class="hover:text-white transition-colors relative group">Evidence<span
                        class="absolute -bottom-1 left-0 w-0 h-px bg-white transition-all group-hover:w-full"></span></a>
                <a href="#" data-nav-section="frontier"
                    class="hover:text-white transition-colors relative group">Frontier<span
                        class="absolute -bottom-1 left-0 w-0 h-px bg-white transition-all group-hover:w-full"></span></a>
            </div>

            <button class="xl:hidden text-white p-2" id="mobile-menu-btn" aria-label="Open menu">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu"
        class="fixed inset-0 bg-black/95 backdrop-blur-xl z-[300] transform translate-x-full transition-transform duration-300 ease-out xl:hidden">
        <div class="flex flex-col h-full">
            <div class="flex items-center justify-between p-6 border-b border-white/10">
                <span class="text-lg font-cinzel font-bold text-white">Navigation</span>
                <button id="mobile-menu-close" class="text-white p-2" aria-label="Close menu">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <nav class="flex-1 flex flex-col justify-center p-8 gap-6">
                <a href="#" data-mobile-nav="hero"
                    class="text-2xl font-cinzel text-zinc-400 hover:text-white transition-colors py-2 border-b border-white/5">Home</a>
                <a href="#" data-mobile-nav="history"
                    class="text-2xl font-cinzel text-zinc-400 hover:text-white transition-colors py-2 border-b border-white/5">History</a>
                <a href="#" data-mobile-nav="anatomy"
                    class="text-2xl font-cinzel text-zinc-400 hover:text-white transition-colors py-2 border-b border-white/5">Anatomy</a>
                <a href="#" data-mobile-nav="deep-dive"
                    class="text-2xl font-cinzel text-zinc-400 hover:text-white transition-colors py-2 border-b border-white/5">Deep
                    Dive</a>
                <a href="#" data-mobile-nav="formation"
                    class="text-2xl font-cinzel text-zinc-400 hover:text-white transition-colors py-2 border-b border-white/5">Formation</a>
                <a href="#" data-mobile-nav="thermodynamics"
                    class="text-2xl font-cinzel text-zinc-400 hover:text-white transition-colors py-2 border-b border-white/5">Thermodynamics</a>
                <a href="#" data-mobile-nav="evidence"
                    class="text-2xl font-cinzel text-zinc-400 hover:text-white transition-colors py-2 border-b border-white/5">Evidence</a>
                <a href="#" data-mobile-nav="frontier"
                    class="text-2xl font-cinzel text-zinc-400 hover:text-white transition-colors py-2 border-b border-white/5">Frontier</a>
            </nav>
            <div class="p-6 text-center text-xs text-zinc-600 font-mono">
                Swipe or scroll to navigate
            </div>
        </div>
    </div>

    <!-- HUD SECTION: Hero -->
    <section id="hero" class="hud-section active" data-depth-start="0" data-depth-end="800">
        <!-- Hero Background Shader (UnicornStudio WebGL Animation) - MUST BE FIRST for proper layering -->
        <div id="hero-shader-bg" style="position: absolute; inset: 0; z-index: 1; pointer-events: none; opacity: 1;">
            <div data-us-project="2OQSrYIf0cItcyUtviyl" style="width:100%; height: 100%;"></div>
        </div>

        <div class="hud-content flex items-center justify-center min-h-screen" style="position: relative; z-index: 2;">
            <div class="text-center px-6">
                <div class="reveal-container mb-6">
                    <div
                        class="reveal-text inline-flex items-center gap-3 px-6 py-2 rounded-full border border-white/10 bg-white/5 backdrop-blur-md">
                        <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                        <span class="text-xs font-bold text-zinc-300 tracking-[0.3em] uppercase font-mono">System
                            Online: 3D Flight Mode</span>
                    </div>
                </div>

                <h1 class="text-7xl md:text-[10rem] font-bold tracking-tighter leading-[0.85] mb-8 hero-title">
                    <div class="reveal-container"><span class="reveal-text block hero-text-main">ZERO</span></div>
                    <div class="reveal-container"><span
                            class="reveal-text block hero-text-sub text-4xl md:text-6xl my-4 font-light tracking-[0.5em] font-sans">TO</span>
                    </div>
                    <div class="reveal-container"><span
                            class="reveal-text block hero-text-main text-silver-gradient">INFINITY</span>
                    </div>
                </h1>

                <div class="reveal-container mb-12">
                    <p
                        class="reveal-text text-lg md:text-xl text-zinc-400 max-w-3xl font-light leading-relaxed mx-auto">
                        The ultimate comprehensive treatise on black hole physics. <br class="hidden md:block" />
                        Scroll to fly through the cosmos and explore the void.
                    </p>
                </div>

                <div class="flex flex-col sm:flex-row items-center justify-center gap-6 opacity-0" id="hero-buttons">
                    <div
                        class="group flex items-center gap-3 bg-white/10 backdrop-blur text-white px-10 py-5 rounded-full font-bold tracking-wide border border-white/20">
                        <i data-lucide="mouse" class="w-4 h-4"></i>
                        SCROLL TO DIVE IN
                        <i data-lucide="chevron-down" class="w-4 h-4 animate-bounce"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Infinite Marquee - Visible across sections -->
    <div
        class="fixed bottom-0 left-0 w-full overflow-hidden bg-[#050505]/80 backdrop-blur border-t border-white/5 py-4 z-50">
        <div class="flex w-max animate-[scroll_40s_linear_infinite]">
            <div class="flex gap-12 px-6">
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">EVENT HORIZON</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">SINGULARITY</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">ERGOSPHERE</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">SPAGHETTIFICATION</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">SCHWARZSCHILD METRIC</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">HAWKING RADIATION</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">INFORMATION PARADOX</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">GRAVITATIONAL WAVES</span>
            </div>
            <div class="flex gap-12 px-6">
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">EVENT HORIZON</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">SINGULARITY</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">ERGOSPHERE</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">SPAGHETTIFICATION</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">SCHWARZSCHILD METRIC</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">HAWKING RADIATION</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">INFORMATION PARADOX</span>
                <span class="text-xs font-cinzel tracking-[0.3em] text-zinc-600">GRAVITATIONAL WAVES</span>
            </div>
        </div>
    </div>

    <!-- Marquee animation keyframes -->
    <style>
        @keyframes scroll {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }
    </style>


    <!-- HUD SECTION: History -->
    <section id="history" class="hud-section" data-depth-start="800" data-depth-end="2500">
        <div class="hud-content py-20">
            <!-- Background -->
            <div class="absolute inset-0 w-full h-full z-0 opacity-20 pointer-events-none">
                <img loading="lazy" src="assets/images/history_bg.png"
                    class="w-full h-full object-cover mix-blend-screen" alt="History BG">
                <div class="absolute inset-0 bg-gradient-to-b from-[#050505] via-transparent to-[#050505]"></div>
            </div>

            <div class="max-w-[1400px] mx-auto px-6 relative z-10">
                <!-- Header -->
                <div class="flex items-end justify-between mb-16 border-b border-white/10 pb-8">
                    <div>
                        <div class="text-xs font-mono text-zinc-500 mb-4 tracking-widest">MODULE 01</div>
                        <h2 class="text-5xl md:text-7xl font-semibold tracking-tight text-white mb-2">Historical
                            Foundation</h2>
                        <p class="text-zinc-400 max-w-xl text-lg font-light">The evolution of an impossible idea: from
                            "Dark Stars" to Physical Reality.</p>
                    </div>
                    <div class="hidden md:block text-right">
                        <div class="text-6xl font-cinzel text-white/5 font-bold">1783—2019</div>
                    </div>
                </div>

                <!-- NEW: Horizontal Scroll Timeline -->
                <div class="mb-32">
                    <h3 class="text-sm font-mono text-zinc-400 mb-6 uppercase tracking-widest flex items-center gap-2">
                        <i data-lucide="clock" class="w-4 h-4"></i> Chronological Overview
                    </h3>
                    <div class="horizontal-timeline-container">
                        <div class="horizontal-timeline">
                            <!-- 1783 -->
                            <div class="timeline-card group">
                                <div
                                    class="text-3xl font-cinzel text-white mb-2 group-hover:text-silver-gradient transition-colors">
                                    1783</div>
                                <h4 class="text-sm font-bold text-zinc-300 uppercase tracking-wider mb-2">John Michell
                                </h4>
                                <p class="text-xs text-zinc-500 leading-relaxed">First proposes "dark stars" where
                                    escape velocity exceeds the speed of light using Newtonian physics.</p>
                            </div>
                            <!-- 1915 -->
                            <div class="timeline-card group">
                                <div
                                    class="text-3xl font-cinzel text-white mb-2 group-hover:text-silver-gradient transition-colors">
                                    1915</div>
                                <h4 class="text-sm font-bold text-zinc-300 uppercase tracking-wider mb-2">General
                                    Relativity</h4>
                                <p class="text-xs text-zinc-500 leading-relaxed">Einstein publishes the field equations,
                                    linking gravity to spacetime curvature.</p>
                            </div>
                            <!-- 1916 -->
                            <div class="timeline-card group">
                                <div
                                    class="text-3xl font-cinzel text-white mb-2 group-hover:text-silver-gradient transition-colors">
                                    1916</div>
                                <h4 class="text-sm font-bold text-zinc-300 uppercase tracking-wider mb-2">Schwarzschild
                                </h4>
                                <p class="text-xs text-zinc-500 leading-relaxed">First exact solution derived. Discovers
                                    the "Magic Circle" (Event Horizon) radius.</p>
                            </div>
                            <!-- 1939 -->
                            <div class="timeline-card group">
                                <div
                                    class="text-3xl font-cinzel text-white mb-2 group-hover:text-silver-gradient transition-colors">
                                    1939</div>
                                <h4 class="text-sm font-bold text-zinc-300 uppercase tracking-wider mb-2">
                                    Oppenheimer-Snyder</h4>
                                <p class="text-xs text-zinc-500 leading-relaxed">Calculates that massive stars can
                                    indeed collapse indefinitely into a singularity.</p>
                            </div>
                            <!-- 1974 -->
                            <div class="timeline-card group">
                                <div
                                    class="text-3xl font-cinzel text-white mb-2 group-hover:text-silver-gradient transition-colors">
                                    1974</div>
                                <h4 class="text-sm font-bold text-zinc-300 uppercase tracking-wider mb-2">Hawking
                                    Radiation</h4>
                                <p class="text-xs text-zinc-500 leading-relaxed">Hawking applies quantum field theory,
                                    proving black holes emit radiation and evaporate.</p>
                            </div>
                            <!-- 2015 -->
                            <div class="timeline-card group">
                                <div
                                    class="text-3xl font-cinzel text-white mb-2 group-hover:text-silver-gradient transition-colors">
                                    2015</div>
                                <h4 class="text-sm font-bold text-zinc-300 uppercase tracking-wider mb-2">LIGO Detection
                                </h4>
                                <p class="text-xs text-zinc-500 leading-relaxed">First direct detection of gravitational
                                    waves from a binary black hole merger.</p>
                            </div>
                            <!-- 2019 -->
                            <div class="timeline-card group">
                                <div
                                    class="text-3xl font-cinzel text-white mb-2 group-hover:text-silver-gradient transition-colors">
                                    2019</div>
                                <h4 class="text-sm font-bold text-zinc-300 uppercase tracking-wider mb-2">EHT Image</h4>
                                <p class="text-xs text-zinc-500 leading-relaxed">Humanity captures the first radio image
                                    of M87*'s shadow.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Vertical Deep Dives -->
                <div class="space-y-32">

                    <!-- 1. John Michell -->
                    <div class="grid lg:grid-cols-2 gap-16 items-start">
                        <div>
                            <div
                                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-xs font-mono text-zinc-300 mb-6">
                                <span class="w-2 h-2 rounded-full bg-zinc-500"></span> 1783: The Corpuscular Theory
                            </div>
                            <h3 class="text-4xl font-cinzel text-white mb-6">Michell's Dark Stars</h3>

                            <!-- Intro -->
                            <p class="text-zinc-400 text-lg leading-relaxed mb-6 text-justify-academic">
                                Long before Einstein, the Reverend John Michell conceived of a body so massive that its
                                escape velocity would exceed the speed of light. Writing to the Royal Society in 1783,
                                he used Newton's corpuscular theory of light—which treated photons as having mass—to
                                argue that light emitted from such a star would be dragged back by its own gravity.
                            </p>

                            <!-- Deep Dive Accordion -->
                            <details class="deep-dive mb-8">
                                <summary>DEEP DIVE: The Newtonian Calculation</summary>
                                <div class="deep-dive-content">
                                    <p class="mb-4">
                                        Michell's calculation was surprisingly accurate despite the incorrect physical
                                        premise (light does not have mass in the Newtonian sense). He equated kinetic
                                        energy with gravitational potential energy:
                                    </p>
                                    <div
                                        class="bg-black/30 p-4 rounded border border-white/10 font-mono text-sm text-center mb-4 text-zinc-300">
                                        ½mv² = GMm/r → v = √(2GM/r)
                                    </div>
                                    <p>
                                        Setting v = c (speed of light), he found that a star with the same density as
                                        the Sun but 500 times the diameter would be invisible. The "corpuscles" of light
                                        would shoot up, slow down, stop, and fall back to the surface like a thrown
                                        stone. While General Relativity would later discard the idea of light slowing
                                        down (c is constant), the radius he calculated is exactly the Schwarzschild
                                        radius derived 133 years later.
                                    </p>
                                </div>
                            </details>

                            <!-- Data Viz -->
                            <div class="mb-8">
                                <div class="flex justify-between text-xs font-mono text-zinc-500 mb-2">
                                    <span>CONCEPTUAL ACCURACY</span>
                                    <span>45%</span>
                                </div>
                                <div class="data-bar-container">
                                    <div class="data-bar-fill" style="width: 45%"></div>
                                </div>
                            </div>

                            <!-- Key Figures Grid -->
                            <div class="key-figures-grid">
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Peer</div>
                                    <div class="font-bold text-white text-sm">Cavendish</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Concept</div>
                                    <div class="font-bold text-white text-sm">Escape Velocity</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Paper</div>
                                    <div class="font-bold text-white text-sm">Phil. Trans.</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Successor</div>
                                    <div class="font-bold text-white text-sm">Laplace</div>
                                </div>
                            </div>
                        </div>

                        <div class="relative">
                            <div class="glass-card p-2 rounded-2xl border-white/10">
                                <img loading="lazy" src="assets/images/michell_diagram.png"
                                    class="rounded-xl w-full object-cover opacity-80" alt="Michell Diagram">
                                <div
                                    class="absolute bottom-6 left-6 right-6 p-6 glass-card bg-black/80 rounded-xl border border-white/10">
                                    <div class="font-serif italic text-zinc-300">"Light attracted by gravity... made to
                                        return towards it."</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Einstein -->
                    <div class="grid lg:grid-cols-2 gap-16 items-start">
                        <div class="lg:order-2">
                            <div
                                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-xs font-mono text-zinc-300 mb-6">
                                <span class="w-2 h-2 rounded-full bg-zinc-500"></span> 1915: General Relativity
                            </div>
                            <h3 class="text-4xl font-cinzel text-white mb-6">Einstein's Revolution</h3>

                            <!-- Intro -->
                            <p class="text-zinc-400 text-lg leading-relaxed mb-6 text-justify-academic">
                                In November 1915, Albert Einstein presented his field equations to the Prussian Academy
                                of Sciences. He dismantled the Newtonian framework of fixed space and absolute time.
                                Instead, he proposed a dynamic, four-dimensional fabric called spacetime, which is
                                warped by the presence of mass and energy. Gravity is not a force, but a geometric
                                feature.
                            </p>

                            <!-- Deep Dive Accordion -->
                            <details class="deep-dive mb-8">
                                <summary>DEEP DIVE: The Field Equations</summary>
                                <div class="deep-dive-content">
                                    <p class="mb-4">
                                        The equation <strong>G<sub>μν</sub> = 8πT<sub>μν</sub></strong> is deceptive in
                                        its brevity. It represents a system of 10 non-linear partial differential
                                        equations.
                                    </p>
                                    <ul class="list-disc pl-5 space-y-2 mb-4 text-zinc-400">
                                        <li><strong>G<sub>μν</sub> (Einstein Tensor):</strong> Describes the curvature
                                            of space and time.</li>
                                        <li><strong>T<sub>μν</sub> (Stress-Energy Tensor):</strong> Describes the
                                            density and flux of energy and momentum.</li>
                                    </ul>
                                    <p>
                                        This framework predicted that light follows the curvature of space (geodesics).
                                        Near a massive object, these paths bend. If the mass is concentrated enough, the
                                        curvature becomes so steep that the geodesics loop back on themselves—trapping
                                        light not by pulling it back, but by bending the road it travels on.
                                    </p>
                                </div>
                            </details>

                            <!-- Data Viz -->
                            <div class="mb-8">
                                <div class="flex justify-between text-xs font-mono text-zinc-500 mb-2">
                                    <span>THEORY VERIFICATION</span>
                                    <span>99.9%</span>
                                </div>
                                <div class="data-bar-container">
                                    <div class="data-bar-fill" style="width: 99.9%"></div>
                                </div>
                            </div>

                            <!-- Key Figures Grid -->
                            <div class="key-figures-grid">
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Key Insight</div>
                                    <div class="font-bold text-white text-sm">Equivalence</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Tool</div>
                                    <div class="font-bold text-white text-sm">Tensors</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Rival</div>
                                    <div class="font-bold text-white text-sm">Hilbert</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Legacy</div>
                                    <div class="font-bold text-white text-sm">Spacetime</div>
                                </div>
                            </div>
                        </div>

                        <div class="relative lg:order-1">
                            <div class="glass-card p-2 rounded-2xl border-white/10">
                                <img loading="lazy" src="assets/images/einstein.png"
                                    class="rounded-xl w-full object-cover opacity-80" alt="Einstein">
                                <div
                                    class="absolute bottom-6 left-6 right-6 p-6 glass-card bg-black/80 rounded-xl border border-white/10">
                                    <div class="font-serif italic text-zinc-300">"Matter tells space how to curve. Space
                                        tells matter how to move."</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Schwarzschild -->
                    <div class="grid lg:grid-cols-2 gap-16 items-start">
                        <div>
                            <div
                                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-xs font-mono text-zinc-300 mb-6">
                                <span class="w-2 h-2 rounded-full bg-zinc-500"></span> 1916: The Exact Solution
                            </div>
                            <h3 class="text-4xl font-cinzel text-white mb-6">Schwarzschild's Limit</h3>

                            <!-- Intro -->
                            <p class="text-zinc-400 text-lg leading-relaxed mb-6 text-justify-academic">
                                Serving on the Russian front during WWI, Karl Schwarzschild managed to solve Einstein's
                                equations for a non-rotating spherical mass. He sent the letter to Einstein just months
                                before dying of an autoimmune disease. His solution contained a singularity—a point
                                where the math blew up—surrounded by a spherical boundary now known as the Event
                                Horizon.
                            </p>

                            <!-- Deep Dive Accordion -->
                            <details class="deep-dive mb-8">
                                <summary>DEEP DIVE: The Mathematical Singularity</summary>
                                <div class="deep-dive-content">
                                    <p class="mb-4">
                                        The metric contains two critical points where the coefficient goes to infinity
                                        or zero:
                                    </p>
                                    <ul class="list-disc pl-5 space-y-2 mb-4 text-zinc-400">
                                        <li><strong>r = 0:</strong> The physical singularity. Curvature is infinite.
                                            Physics breaks down.</li>
                                        <li><strong>r = 2GM/c²:</strong> The coordinate singularity. Originally thought
                                            to be physical, later proven (by Eddington and Finkelstein) to be an
                                            illusion of the coordinate system choice. It is a one-way membrane.</li>
                                    </ul>
                                    <p>
                                        This radius is shockingly small. To turn Earth into a black hole, you would need
                                        to compress its entire mass into a marble of radius 9mm. For the Sun, it is 3km.
                                    </p>
                                </div>
                            </details>

                            <!-- Data Viz -->
                            <div class="mb-8">
                                <div class="flex justify-between text-xs font-mono text-zinc-500 mb-2">
                                    <span>RADIUS COMPRESSION RATIO</span>
                                    <span>1 : 100,000,000</span>
                                </div>
                                <div class="data-bar-container">
                                    <div class="data-bar-fill" style="width: 15%"></div>
                                </div>
                            </div>

                            <!-- Key Figures Grid -->
                            <div class="key-figures-grid">
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Context</div>
                                    <div class="font-bold text-white text-sm">WWI Front</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Discovery</div>
                                    <div class="font-bold text-white text-sm">Exact Solution</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Radius</div>
                                    <div class="font-bold text-white text-sm">2GM/c²</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Fate</div>
                                    <div class="font-bold text-white text-sm">Tragedy</div>
                                </div>
                            </div>
                        </div>

                        <div class="relative">
                            <div class="glass-card p-2 rounded-2xl border-white/10">
                                <img loading="lazy" src="assets/images/schwarzschild.png"
                                    class="rounded-xl w-full object-cover opacity-80" alt="Schwarzschild">
                                <div
                                    class="absolute bottom-6 left-6 right-6 p-6 glass-card bg-black/80 rounded-xl border border-white/10">
                                    <div class="font-serif italic text-zinc-300">"The war treated me kindly enough to
                                        allow me this walk in the land of your ideas."</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- HUD SECTION: Anatomy -->
    <section id="anatomy" class="hud-section" data-depth-start="2500" data-depth-end="4000">
        <div class="hud-content py-20">
            <div class="max-w-[1600px] mx-auto px-6 relative z-10">
                <!-- Header -->
                <div class="flex items-center gap-6 mb-12">
                    <span class="text-6xl font-cinzel text-white/5 font-bold select-none">02</span>
                    <div>
                        <div class="text-xs text-zinc-500 uppercase tracking-[0.2em] font-semibold">Structural Analysis
                        </div>
                        <h2 class="text-4xl font-semibold tracking-tight text-white">Anatomy Dashboard</h2>
                    </div>
                </div>

                <!-- 3-Column Dashboard -->
                <div class="dashboard-grid">

                    <!-- LEFT COLUMN: PHYSICS DATA -->
                    <div class="space-y-6">
                        <div class="glass-card p-6 rounded-xl border-l-2 border-l-blue-500/50">
                            <h4 class="text-sm font-bold text-zinc-300 uppercase tracking-wider mb-4">Metric Parameters
                            </h4>
                            <div class="space-y-4 font-mono text-xs">
                                <div class="flex justify-between items-center border-b border-white/5 pb-2">
                                    <span class="text-zinc-500">Mass (M)</span>
                                    <span class="text-white">Variable</span>
                                </div>
                                <div class="flex justify-between items-center border-b border-white/5 pb-2">
                                    <span class="text-zinc-500">Spin (J)</span>
                                    <span class="text-white">0 ≤ a ≤ 1</span>
                                </div>
                                <div class="flex justify-between items-center border-b border-white/5 pb-2">
                                    <span class="text-zinc-500">Charge (Q)</span>
                                    <span class="text-white">~ 0 (Neutral)</span>
                                </div>
                            </div>
                        </div>

                        <div class="glass-card p-6 rounded-xl">
                            <h4 class="text-sm font-bold text-zinc-300 uppercase tracking-wider mb-4">Critical Radii
                            </h4>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between text-xs text-zinc-400 mb-1">
                                        <span>Singularity</span>
                                        <span class="font-mono text-white">r = 0</span>
                                    </div>
                                    <div class="h-1 bg-white/10 rounded overflow-hidden">
                                        <div class="h-full bg-red-500 w-full"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs text-zinc-400 mb-1">
                                        <span>Event Horizon</span>
                                        <span class="font-mono text-white">r = 2M</span>
                                    </div>
                                    <div class="h-1 bg-white/10 rounded overflow-hidden">
                                        <div class="h-full bg-white w-2/3"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs text-zinc-400 mb-1">
                                        <span>Photon Sphere</span>
                                        <span class="font-mono text-white">r = 3M</span>
                                    </div>
                                    <div class="h-1 bg-white/10 rounded overflow-hidden">
                                        <div class="h-full bg-yellow-500 w-full"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs text-zinc-400 mb-1">
                                        <span>ISCO (Stable Orbit)</span>
                                        <span class="font-mono text-white">r = 6M</span>
                                    </div>
                                    <div class="h-1 bg-white/10 rounded overflow-hidden">
                                        <div class="h-full bg-blue-500 w-full"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="glass-card p-6 rounded-xl">
                            <h4 class="text-sm font-bold text-zinc-300 uppercase tracking-wider mb-4">No-Hair Theorem
                            </h4>
                            <p class="text-xs text-zinc-400 leading-relaxed mb-4">
                                "Black holes have no hair." A stationary black hole is completely described by Mass,
                                Spin, and Charge. All other information (baryon number, lepton number, shape) is
                                radiated away during formation.
                            </p>
                            <div class="grid grid-cols-3 gap-2">
                                <div class="bg-white/5 p-2 rounded text-center border border-white/5">
                                    <div class="text-lg font-serif">M</div>
                                </div>
                                <div class="bg-white/5 p-2 rounded text-center border border-white/5">
                                    <div class="text-lg font-serif">J</div>
                                </div>
                                <div class="bg-white/5 p-2 rounded text-center border border-white/5">
                                    <div class="text-lg font-serif">Q</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CENTER COLUMN: VISUAL ENGINE (STICKY) -->
                    <div class="relative min-h-[500px] lg:min-h-auto">
                        <div
                            class="sticky-center glass-card rounded-2xl overflow-hidden shadow-2xl shadow-black/50 border border-white/10">
                            <div id="blackhole-wrapper" class="w-full h-full relative bg-radial-gradient">
                                <!-- Canvas injected here -->
                                <canvas id="blackhole-canvas"></canvas>

                                <!-- Overlay UI -->
                                <div class="absolute top-4 left-4 flex gap-2">
                                    <span
                                        class="px-2 py-1 bg-red-500/20 border border-red-500/30 text-[10px] text-red-200 uppercase tracking-wider rounded">Live
                                        Sim</span>
                                    <span
                                        class="px-2 py-1 bg-white/5 border border-white/10 text-[10px] text-zinc-400 uppercase tracking-wider rounded">Kerr
                                        Metric</span>
                                </div>
                                <div class="absolute bottom-6 w-full text-center pointer-events-none">
                                    <p class="text-[10px] text-zinc-500 uppercase tracking-[0.3em]">Interactive Model
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT COLUMN: EXPLANATIONS -->
                    <div class="space-y-6">
                        <!-- Feature 1 -->
                        <div class="glass-card p-6 rounded-xl group hover:bg-white/5 transition-colors cursor-default">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-cinzel text-lg text-white group-hover:text-silver-gradient">The Event
                                    Horizon</h4>
                                <i data-lucide="circle" class="w-4 h-4 text-zinc-500"></i>
                            </div>
                            <p class="text-sm text-zinc-400 leading-relaxed mb-4">
                                The point of no return. Here, the escape velocity equals the speed of light. To an
                                outside observer, an object falling in appears to freeze and fade (redshift) forever. To
                                the object, they cross without drama.
                            </p>
                            <div class="h-px w-full bg-white/10 my-4"></div>
                            <div class="flex gap-4">
                                <div class="text-center">
                                    <div class="text-[10px] text-zinc-500 uppercase">Temp</div>
                                    <div class="text-xs font-mono text-white">~0 K</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-[10px] text-zinc-500 uppercase">Time</div>
                                    <div class="text-xs font-mono text-white">Frozen</div>
                                </div>
                            </div>
                        </div>

                        <!-- Feature 2 -->
                        <div class="glass-card p-6 rounded-xl group hover:bg-white/5 transition-colors cursor-default">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-cinzel text-lg text-white group-hover:text-silver-gradient">The Photon
                                    Sphere</h4>
                                <i data-lucide="orbit" class="w-4 h-4 text-zinc-500"></i>
                            </div>
                            <p class="text-sm text-zinc-400 leading-relaxed mb-4">
                                Located at 1.5Rs (for non-rotating). Here, gravity is so strong that photons are forced
                                into unstable circular orbits. If you stood here, you could see the back of your own
                                head.
                            </p>
                            <div class="h-px w-full bg-white/10 my-4"></div>
                            <div class="text-[10px] text-zinc-500 uppercase mb-1">Orbit Stability</div>
                            <div class="w-full bg-white/10 h-1 rounded overflow-hidden">
                                <div class="w-1/4 bg-red-500 h-full"></div>
                            </div>
                            <div class="text-[10px] text-red-400 mt-1">Highly Unstable</div>
                        </div>

                        <!-- Feature 3 -->
                        <div class="glass-card p-6 rounded-xl group hover:bg-white/5 transition-colors cursor-default">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-cinzel text-lg text-white group-hover:text-silver-gradient">The
                                    Ergosphere</h4>
                                <i data-lucide="refresh-cw" class="w-4 h-4 text-zinc-500"></i>
                            </div>
                            <p class="text-sm text-zinc-400 leading-relaxed mb-4">
                                Only in rotating (Kerr) black holes. A region outside the horizon where spacetime is
                                dragged along with the rotation (frame-dragging). It is impossible to stand still here.
                            </p>
                            <div class="h-px w-full bg-white/10 my-4"></div>
                            <div class="flex justify-between items-center">
                                <span class="text-[10px] text-zinc-500 uppercase">Penrose Process</span>
                                <span class="text-xs text-green-400">Energy Extraction Possible</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SINGULARITIES GRID -->
                <div class="mt-20">
                    <h3 class="text-2xl font-cinzel text-white mb-8 border-b border-white/10 pb-4">Types of
                        Singularities</h3>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Card 1 -->
                        <div class="glass-card p-6 rounded-xl">
                            <h4 class="text-white font-bold mb-2">Schwarzschild</h4>
                            <p class="text-xs text-zinc-400 mb-4">Point-like singularity. Infinite density, zero volume.
                                The classic result for non-rotating mass.</p>
                            <div
                                class="w-full h-24 bg-black rounded border border-white/5 flex items-center justify-center relative overflow-hidden">
                                <div class="w-1 h-1 bg-white rounded-full shadow-[0_0_20px_white]"></div>
                            </div>
                        </div>
                        <!-- Card 2 -->
                        <div class="glass-card p-6 rounded-xl">
                            <h4 class="text-white font-bold mb-2">Ring (Kerr)</h4>
                            <p class="text-xs text-zinc-400 mb-4">A one-dimensional ring due to angular momentum.
                                Theoretically traversable in some math models.</p>
                            <div
                                class="w-full h-24 bg-black rounded border border-white/5 flex items-center justify-center relative overflow-hidden">
                                <div class="w-8 h-2 border border-white rounded-full shadow-[0_0_10px_white]"></div>
                            </div>
                        </div>
                        <!-- Card 3 -->
                        <div class="glass-card p-6 rounded-xl">
                            <h4 class="text-white font-bold mb-2">Naked</h4>
                            <p class="text-xs text-zinc-400 mb-4">A singularity without an event horizon. Prohibited by
                                the Cosmic Censorship Hypothesis.</p>
                            <div
                                class="w-full h-24 bg-black rounded border border-white/5 flex items-center justify-center relative overflow-hidden">
                                <div class="w-1 h-1 bg-red-500 rounded-full shadow-[0_0_20px_red] animate-pulse"></div>
                            </div>
                        </div>
                        <!-- Card 4 -->
                        <div class="glass-card p-6 rounded-xl">
                            <h4 class="text-white font-bold mb-2">Coordinate</h4>
                            <p class="text-xs text-zinc-400 mb-4">Not a physical singularity, but a flaw in the math
                                (e.g., at the Event Horizon in Schwarzschild coords).</p>
                        </div>
                        <!-- Card 5 -->
                        <div class="glass-card p-6 rounded-xl">
                            <h4 class="text-white font-bold mb-2">Big Bang</h4>
                            <p class="text-xs text-zinc-400 mb-4">A past singularity. Similar mathematics, but inverted
                                time direction (expansion vs collapse).</p>
                        </div>
                        <!-- Card 6 -->
                        <div class="glass-card p-6 rounded-xl">
                            <h4 class="text-white font-bold mb-2">Big Crunch</h4>
                            <p class="text-xs text-zinc-400 mb-4">A future singularity. The potential end state of a
                                closed universe collapsing.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </section>


    <!-- HUD SECTION: Deep Dive -->
    <section id="deep-dive" class="hud-section" data-depth-start="4000" data-depth-end="5500">
        <div class="hud-content py-20">
            <div class="absolute inset-0 z-0 opacity-10 pointer-events-none">
                <img loading="lazy" src="assets/images/math_bg.png" class="w-full h-full object-cover" alt="Math BG">
            </div>

            <div class="max-w-[1400px] mx-auto px-6 relative z-10">
                <div class="flex items-center gap-6 mb-20">
                    <span
                        class="text-8xl font-cinzel text-white/5 font-bold absolute -left-6 -top-10 select-none">03</span>
                    <div class="relative">
                        <div class="text-xs text-zinc-500 uppercase tracking-[0.2em] mb-2 font-semibold">Module Three
                        </div>
                        <h2 class="text-5xl md:text-6xl font-semibold tracking-tight">Deep Dive: Physics &amp; Math</h2>
                    </div>
                </div>

                <!-- Existing Intro Expanded -->
                <div class="max-w-4xl mb-24">
                    <p class="text-xl text-zinc-300 leading-relaxed font-light mb-8 text-justify-academic">
                        To truly understand black holes, we must abandon Newtonian intuition. We enter the realm of
                        Differential Geometry, where gravity is the curvature of the spacetime manifold itself. The
                        Schwarzschild metric is the first solution to Einstein's field equations, describing the
                        geometry of spacetime surrounding a spherical mass.
                    </p>
                    <div
                        class="equation-box p-8 rounded-xl text-center shadow-2xl bg-black/50 backdrop-blur-xl border border-white/10">
                        <div class="text-2xl md:text-4xl text-white font-serif italic mb-4">
                            ds² = -(1 - <span class="text-zinc-400">R<sub>s</sub></span>/r)c²dt² + (1 - <span
                                class="text-zinc-400">R<sub>s</sub></span>/r)<sup>-1</sup>dr² + r²dΩ²
                        </div>
                        <div class="text-xs text-zinc-500 font-mono uppercase tracking-widest">The Schwarzschild Line
                            Element</div>
                    </div>
                </div>

                <!-- NEW: GLOSSARY GRID (12 ITEMS) -->
                <div class="mb-32">
                    <h3 class="text-2xl font-cinzel text-white mb-8 flex items-center gap-3">
                        <i data-lucide="book" class="w-5 h-5 text-zinc-500"></i> Glossary of Terms
                    </h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        <!-- 1 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Concept</div>
                            <h4 class="text-white font-bold mb-2">Manifold</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">A topological space that locally
                                resembles Euclidean space near each point.</p>
                        </div>
                        <!-- 2 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Math</div>
                            <h4 class="text-white font-bold mb-2">Geodesic</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">The shortest path between two points in
                                a curved space. Light follows these.</p>
                        </div>
                        <!-- 3 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Object</div>
                            <h4 class="text-white font-bold mb-2">Metric Tensor</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">A function that defines distance and
                                angles at every point in spacetime.</p>
                        </div>
                        <!-- 4 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Limit</div>
                            <h4 class="text-white font-bold mb-2">TOV Limit</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">Tolman-Oppenheimer-Volkoff. Max mass of
                                a neutron star (~2.2M☉) before collapse.</p>
                        </div>
                        <!-- 5 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Effect</div>
                            <h4 class="text-white font-bold mb-2">Frame Dragging</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">Rotating mass drags spacetime with it.
                                Also known as the Lense-Thirring effect.</p>
                        </div>
                        <!-- 6 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Region</div>
                            <h4 class="text-white font-bold mb-2">ISCO</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">Innermost Stable Circular Orbit. The
                                closest matter can orbit safely.</p>
                        </div>
                        <!-- 7 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Radiation</div>
                            <h4 class="text-white font-bold mb-2">Bremsstrahlung</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">"Braking radiation" emitted by
                                decelerating charged particles in the disk.</p>
                        </div>
                        <!-- 8 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Structure</div>
                            <h4 class="text-white font-bold mb-2">Jet</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">Relativistic beam of matter ejected
                                along the rotation axis.</p>
                        </div>
                        <!-- 9 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Phenomenon</div>
                            <h4 class="text-white font-bold mb-2">Tidal Force</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">Differential gravity force stretching
                                an object. Source of Spaghettification.</p>
                        </div>
                        <!-- 10 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Light</div>
                            <h4 class="text-white font-bold mb-2">Gravitational Lens</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">Bending of light from a distant source
                                around a massive object.</p>
                        </div>
                        <!-- 11 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Effect</div>
                            <h4 class="text-white font-bold mb-2">Redshift</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">Light losing energy as it climbs out of
                                a gravity well, shifting red.</p>
                        </div>
                        <!-- 12 -->
                        <div class="glass-card p-4 rounded-lg hover:bg-white/5 transition-colors">
                            <div class="text-xs text-zinc-500 uppercase mb-1">Math</div>
                            <h4 class="text-white font-bold mb-2">Tensor</h4>
                            <p class="text-[10px] text-zinc-400 leading-relaxed">Geometric object describing linear
                                relations between vectors/scalars.</p>
                        </div>
                    </div>
                </div>

                <!-- SUBSECTION 1: TIME DILATION -->
                <div class="grid lg:grid-cols-2 gap-16 items-start mb-32 border-t border-white/5 pt-16">
                    <div>
                        <div
                            class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-xs font-mono text-blue-200 mb-6">
                            <i data-lucide="clock" class="w-3 h-3"></i> Temporal Mechanics
                        </div>
                        <h3 class="text-4xl font-cinzel text-white mb-6">Gravitational Time Dilation</h3>

                        <p class="text-zinc-400 text-lg leading-relaxed mb-6 text-justify-academic">
                            Near a massive body, time itself flows slower relative to a distant observer. This is not an
                            illusion or a mechanical failure of clocks; it is a fundamental property of the universe.
                            The closer you are to the event horizon, the slower you move through time. At the horizon
                            itself, time stands still from the perspective of the outside universe.
                        </p>

                        <details class="deep-dive mb-8">
                            <summary>DEEP DIVE: The Twin Paradox Extreme</summary>
                            <div class="deep-dive-content">
                                <p class="mb-4">
                                    The formula for time dilation near a Schwarzschild black hole is:
                                </p>
                                <div
                                    class="bg-black/30 p-4 rounded border border-white/10 font-mono text-sm text-center mb-4 text-zinc-300">
                                    t' = t * √(1 - Rs/r)
                                </div>
                                <p>
                                    If you were to hover just outside the event horizon of a supermassive black hole for
                                    what felt like one hour, millions of years could pass in the outside universe. This
                                    effect allows for one-way time travel into the future. However, the energy required
                                    to maintain a stationary position there would be infinite.
                                </p>
                            </div>
                        </details>

                        <div class="mb-8">
                            <div class="flex justify-between text-xs font-mono text-zinc-500 mb-2">
                                <span>TIME RATE AT HORIZON (Relative to Earth)</span>
                                <span>0%</span>
                            </div>
                            <div class="data-bar-container">
                                <div class="data-bar-fill" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="key-figures-grid">
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Film</div>
                                <div class="font-bold text-white text-sm">Interstellar</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Concept</div>
                                <div class="font-bold text-white text-sm">Relativity</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Test</div>
                                <div class="font-bold text-white text-sm">GPS Satellites</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Limit</div>
                                <div class="font-bold text-white text-sm">Infinite</div>
                            </div>
                        </div>
                    </div>

                    <div class="relative">
                        <div
                            class="glass-card p-2 rounded-2xl border-white/10 rotate-1 hover:rotate-0 transition-transform duration-500">
                            <img loading="lazy" src="assets/images/time_dilation.png"
                                class="rounded-xl w-full object-cover" alt="Time Dilation">
                        </div>
                    </div>
                </div>

                <!-- SUBSECTION 2: SPAGHETTIFICATION -->
                <div class="grid lg:grid-cols-2 gap-16 items-start mb-32 border-t border-white/5 pt-16">
                    <div class="relative lg:order-2">
                        <div
                            class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-red-500/10 border border-red-500/20 text-xs font-mono text-red-200 mb-6">
                            <i data-lucide="scissors" class="w-3 h-3"></i> Tidal Forces
                        </div>
                        <h3 class="text-4xl font-cinzel text-white mb-6">Spaghettification</h3>

                        <p class="text-zinc-400 text-lg leading-relaxed mb-6 text-justify-academic">
                            Technically known as the tidal effect, this is the stretching of an object due to the
                            difference in gravitational force between its head and its feet. In a small black hole, the
                            gradient is so steep that you would be ripped apart into a stream of atoms long before
                            crossing the horizon.
                        </p>

                        <details class="deep-dive mb-8">
                            <summary>DEEP DIVE: The Tidal Tensor</summary>
                            <div class="deep-dive-content">
                                <p class="mb-4">
                                    The tidal force is proportional to M/r³. This means smaller black holes actually
                                    have <em>stronger</em> tidal forces at their horizons than supermassive ones.
                                </p>
                                <p>
                                    For a stellar-mass black hole, the tidal force at the horizon is enough to shred
                                    steel. For a supermassive black hole like M87*, the horizon is so far away (billions
                                    of km) that the tidal forces are negligible at the crossing point. You could cross
                                    the event horizon of a supermassive black hole without feeling anything
                                    unusual—until you approached the singularity.
                                </p>
                            </div>
                        </details>

                        <div class="mb-8">
                            <div class="flex justify-between text-xs font-mono text-zinc-500 mb-2">
                                <span>STRUCTURAL INTEGRITY (Stellar Mass BH)</span>
                                <span>CRITICAL FAILURE</span>
                            </div>
                            <div class="data-bar-container">
                                <div class="data-bar-fill bg-red-500" style="width: 1%"></div>
                            </div>
                        </div>

                        <div class="key-figures-grid">
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Term</div>
                                <div class="font-bold text-white text-sm">Hawking</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Cause</div>
                                <div class="font-bold text-white text-sm">Gradient</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Outcome</div>
                                <div class="font-bold text-white text-sm">Atomization</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Geometry</div>
                                <div class="font-bold text-white text-sm">Vertical</div>
                            </div>
                        </div>
                    </div>

                    <div class="relative lg:order-1">
                        <div
                            class="glass-card p-2 rounded-2xl border-white/10 -rotate-1 hover:rotate-0 transition-transform duration-500">
                            <img loading="lazy" src="assets/images/spaghettification.png"
                                class="rounded-xl w-full object-cover" alt="Spaghettification">
                        </div>
                    </div>
                </div>

                <!-- SUBSECTION 3: REDSHIFT -->
                <div class="grid lg:grid-cols-2 gap-16 items-start border-t border-white/5 pt-16">
                    <div>
                        <div
                            class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-orange-500/10 border border-orange-500/20 text-xs font-mono text-orange-200 mb-6">
                            <i data-lucide="arrow-down-right" class="w-3 h-3"></i> Spectral Shift
                        </div>
                        <h3 class="text-4xl font-cinzel text-white mb-6">Gravitational Redshift</h3>

                        <p class="text-zinc-400 text-lg leading-relaxed mb-6 text-justify-academic">
                            As light attempts to climb out of the gravitational well of a black hole, it loses energy.
                            Since the speed of light is constant, this loss of energy manifests as a decrease in
                            frequency—a shift towards the red end of the spectrum.
                        </p>

                        <details class="deep-dive mb-8">
                            <summary>DEEP DIVE: Infinite Redshift</summary>
                            <div class="deep-dive-content">
                                <p class="mb-4">
                                    At the event horizon, the redshift becomes infinite. A blue laser pointer shone
                                    outward from the horizon would be redshifted so far that its wavelength would exceed
                                    the size of the observable universe.
                                </p>
                                <p>
                                    This is why black holes are black. It's not just that light can't escape; it's that
                                    any light emitted from just above the horizon is redshifted into invisibility (radio
                                    waves and beyond) by the time it reaches us.
                                </p>
                            </div>
                        </details>

                        <div class="mb-8">
                            <div class="flex justify-between text-xs font-mono text-zinc-500 mb-2">
                                <span>WAVELENGTH SHIFT</span>
                                <span>EXPONENTIAL</span>
                            </div>
                            <div class="data-bar-container">
                                <div class="data-bar-fill bg-orange-500" style="width: 85%"></div>
                            </div>
                        </div>

                        <div class="key-figures-grid">
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Exp</div>
                                <div class="font-bold text-white text-sm">Pound-Rebka</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Color</div>
                                <div class="font-bold text-white text-sm">Infrared</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Energy</div>
                                <div class="font-bold text-white text-sm">Loss</div>
                            </div>
                            <div class="glass-card p-4 rounded-lg text-center">
                                <div class="text-xs text-zinc-500 uppercase tracking-wider mb-1">Use</div>
                                <div class="font-bold text-white text-sm">Mapping</div>
                            </div>
                        </div>
                    </div>

                    <div class="relative">
                        <div
                            class="glass-card p-2 rounded-2xl border-white/10 rotate-1 hover:rotate-0 transition-transform duration-500">
                            <img loading="lazy" src="assets/images/redshift.png" class="rounded-xl w-full object-cover"
                                alt="Redshift">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- HUD SECTION: Formation -->
    <section id="formation" class="hud-section" data-depth-start="5500" data-depth-end="7000">
        <div class="hud-content py-20">
            <div class="absolute inset-0 z-0 opacity-20 pointer-events-none">
                <img loading="lazy" src="assets/images/formation_bg.png"
                    class="w-full h-full object-cover mix-blend-screen opacity-50" alt="Formation BG">
            </div>

            <div class="max-w-[1400px] mx-auto px-6 relative z-10">
                <div class="flex items-center gap-6 mb-20">
                    <span
                        class="text-8xl font-cinzel text-white/5 font-bold absolute -left-6 -top-10 select-none">04</span>
                    <div class="relative">
                        <div class="text-xs text-zinc-500 uppercase tracking-[0.2em] mb-2 font-semibold">Module Four
                        </div>
                        <h2 class="text-5xl md:text-6xl font-semibold tracking-tight">Formation &amp; Evolution</h2>
                    </div>
                </div>

                <div class="space-y-32">
                    <!-- 1. Stellar Mass -->
                    <div class="grid lg:grid-cols-2 gap-16 items-start">
                        <div>
                            <h3 class="text-3xl font-cinzel text-white mb-6">Stellar Mass Black Holes</h3>
                            <p class="text-zinc-400 text-lg leading-relaxed mb-6 text-justify-academic">
                                The most common type of black hole forms from the death of massive stars. When a star at
                                least 20 times more massive than our Sun runs out of fuel, thermal pressure can no
                                longer support its weight. The core collapses in a fraction of a second, causing a
                                supernova explosion while the center crushes down into a singularity.
                            </p>
                            <details class="deep-dive mb-8">
                                <summary>DEEP DIVE: The TOV Limit</summary>
                                <div class="deep-dive-content">
                                    <p class="mb-4">
                                        The Tolman-Oppenheimer-Volkoff limit defines the maximum mass of a neutron star
                                        (approx 2.17 solar masses). If the remnant core exceeds this mass, neutron
                                        degeneracy pressure fails, and total collapse is inevitable.
                                    </p>
                                </div>
                            </details>
                            <div class="mb-8">
                                <div class="flex justify-between text-xs font-mono text-zinc-500 mb-2">
                                    <span>POPULATION ESTIMATE (Milky Way)</span>
                                    <span>~100,000,000</span>
                                </div>
                                <div class="data-bar-container">
                                    <div class="data-bar-fill" style="width: 20%"></div>
                                </div>
                            </div>
                            <div class="key-figures-grid">
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase mb-1">Source</div>
                                    <div class="font-bold text-white text-sm">Supernova</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase mb-1">Mass</div>
                                    <div class="font-bold text-white text-sm">3-100 M☉</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase mb-1">Example</div>
                                    <div class="font-bold text-white text-sm">Cygnus X-1</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase mb-1">Rate</div>
                                    <div class="font-bold text-white text-sm">1/Sec</div>
                                </div>
                            </div>
                        </div>
                        <div class="glass-card p-2 rounded-2xl border-white/10">
                            <img loading="lazy" src="assets/images/cygnus_x1.png"
                                class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
                                alt="Stellar Mass">
                        </div>
                    </div>

                    <!-- 2. Supermassive -->
                    <div class="grid lg:grid-cols-2 gap-16 items-start">
                        <div class="lg:order-2">
                            <h3 class="text-3xl font-cinzel text-white mb-6">Supermassive Black Holes</h3>
                            <p class="text-zinc-400 text-lg leading-relaxed mb-6 text-justify-academic">
                                Monsters residing at the centers of nearly all large galaxies. Ranging from millions to
                                billions of solar masses, their origin remains a mystery. They may have formed from the
                                direct collapse of pristine gas clouds in the early universe, or from the rapid merger
                                of smaller seeds.
                            </p>
                            <details class="deep-dive mb-8">
                                <summary>DEEP DIVE: Quasars &amp; AGNs</summary>
                                <div class="deep-dive-content">
                                    <p class="mb-4">
                                        When these giants feed, they become Active Galactic Nuclei (AGNs). A Quasar is
                                        an AGN so bright it outshines its entire host galaxy. The energy comes from the
                                        accretion disk converting mass to energy with up to 40% efficiency (nuclear
                                        fusion is only 0.7%).
                                    </p>
                                </div>
                            </details>
                            <div class="mb-8">
                                <div class="flex justify-between text-xs font-mono text-zinc-500 mb-2">
                                    <span>MAX OBSERVED MASS (TON 618)</span>
                                    <span>66,000,000,000 M☉</span>
                                </div>
                                <div class="data-bar-container">
                                    <div class="data-bar-fill bg-purple-500" style="width: 100%"></div>
                                </div>
                            </div>
                            <div class="key-figures-grid">
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase mb-1">Example</div>
                                    <div class="font-bold text-white text-sm">Sgr A*</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase mb-1">Role</div>
                                    <div class="font-bold text-white text-sm">Anchor</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase mb-1">Engine</div>
                                    <div class="font-bold text-white text-sm">Quasar</div>
                                </div>
                                <div class="glass-card p-4 rounded-lg text-center">
                                    <div class="text-xs text-zinc-500 uppercase mb-1">Age</div>
                                    <div class="font-bold text-white text-sm">Primordial</div>
                                </div>
                            </div>
                        </div>
                        <div class="lg:order-1 glass-card p-2 rounded-2xl border-white/10">
                            <img loading="lazy" src="assets/images/supermassive_bh.png"
                                class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
                                alt="Supermassive">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- HUD SECTION: Thermodynamics -->
    <section id="thermodynamics" class="hud-section" data-depth-start="7000" data-depth-end="8200">
        <div class="hud-content py-20">
            <div class="max-w-[1400px] mx-auto px-6 relative z-10">
                <div class="flex items-center gap-6 mb-20">
                    <span
                        class="text-8xl font-cinzel text-white/5 font-bold absolute -left-6 -top-10 select-none">05</span>
                    <div class="relative">
                        <div class="text-xs text-zinc-500 uppercase tracking-[0.2em] mb-2 font-semibold">Module Five
                        </div>
                        <h2 class="text-5xl md:text-6xl font-semibold tracking-tight">Thermodynamics</h2>
                    </div>
                </div>

                <div class="grid lg:grid-cols-2 gap-12">
                    <!-- Hawking Radiation -->
                    <div class="glass-card p-8 rounded-2xl relative overflow-hidden group">
                        <div
                            class="absolute inset-0 bg-blue-500/5 opacity-0 group-hover:opacity-100 transition-opacity">
                        </div>
                        <h3 class="text-2xl font-cinzel text-white mb-4 relative z-10">Hawking Radiation</h3>
                        <p class="text-zinc-400 mb-6 leading-relaxed relative z-10">
                            Classically, black holes are perfect absorbers. Quantum mechanically, they glow. Stephen
                            Hawking showed that particle-antiparticle pairs popping into existence near the horizon can
                            be separated—one falls in, one escapes. The escaping particle becomes radiation, stealing
                            mass from the black hole.
                        </p>
                        <details class="deep-dive mb-6 relative z-10">
                            <summary>DEEP DIVE: Evaporation Time</summary>
                            <div class="deep-dive-content">
                                <p>Evaporation time is proportional to M³. A solar mass black hole would take 10⁶⁷ years
                                    to evaporate. A microscopic black hole would flash out of existence instantly.</p>
                                <div class="mt-4 font-mono text-xs text-center border p-2 rounded border-white/10">T ~
                                    1/M</div>
                            </div>
                        </details>
                        <div class="grid grid-cols-2 gap-4 relative z-10">
                            <div class="glass-card p-3 text-center">
                                <div class="text-[10px] text-zinc-500">Year</div>
                                <div class="font-bold">1974</div>
                            </div>
                            <div class="glass-card p-3 text-center">
                                <div class="text-[10px] text-zinc-500">Temp</div>
                                <div class="font-bold">Nano-Kelvin</div>
                            </div>
                        </div>
                    </div>

                    <!-- Entropy -->
                    <div class="glass-card p-8 rounded-2xl relative overflow-hidden group">
                        <div
                            class="absolute inset-0 bg-green-500/5 opacity-0 group-hover:opacity-100 transition-opacity">
                        </div>
                        <h3 class="text-2xl font-cinzel text-white mb-4 relative z-10">Bekenstein Entropy</h3>
                        <p class="text-zinc-400 mb-6 leading-relaxed relative z-10">
                            Entropy is a measure of hidden information. Bekenstein realized that if a black hole had no
                            entropy, dropping a tea cup into it would violate the Second Law of Thermodynamics. He
                            proposed the entropy is proportional to the surface area of the horizon.
                        </p>
                        <details class="deep-dive mb-6 relative z-10">
                            <summary>DEEP DIVE: The Holographic Principle</summary>
                            <div class="deep-dive-content">
                                <p>This realization led to the Holographic Principle: the maximum amount of information
                                    held in a volume of space is proportional to the surface area of its boundary, not
                                    its volume. The 3D universe might be a projection of 2D data.</p>
                            </div>
                        </details>
                        <div class="grid grid-cols-2 gap-4 relative z-10">
                            <div class="glass-card p-3 text-center">
                                <div class="text-[10px] text-zinc-500">Symbol</div>
                                <div class="font-bold">S</div>
                            </div>
                            <div class="glass-card p-3 text-center">
                                <div class="text-[10px] text-zinc-500">Relation</div>
                                <div class="font-bold">Area (A)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- HUD SECTION: Evidence -->
    <section id="evidence" class="hud-section" data-depth-start="8200" data-depth-end="9200">
        <div class="hud-content">
            <div class="max-w-[1400px] mx-auto px-6 relative z-10 py-20">
                <div class="flex items-center gap-6 mb-20">
                    <span
                        class="text-8xl font-cinzel text-white/5 font-bold absolute -left-6 -top-10 select-none">06</span>
                    <div class="relative">
                        <div class="text-xs text-zinc-500 uppercase tracking-[0.2em] mb-2 font-semibold">Module Six
                        </div>
                        <h2 class="text-5xl md:text-6xl font-semibold tracking-tight">Hard Evidence</h2>
                    </div>
                </div>

                <!-- EHT & LIGO Parallax -->
                <div class="space-y-6">
                    <!-- EHT -->
                    <div class="relative min-h-[60vh] rounded-3xl overflow-hidden flex items-center group">
                        <div class="absolute inset-0 z-0">
                            <img loading="lazy" src="assets/images/eht_telescope.png"
                                class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105"
                                alt="EHT">
                            <div class="absolute inset-0 bg-gradient-to-r from-black via-black/80 to-transparent"></div>
                        </div>
                        <div class="relative z-10 p-12 max-w-2xl">
                            <div class="inline-block bg-orange-500 text-black font-bold px-3 py-1 text-xs mb-4">2019 /
                                2022</div>
                            <h3 class="text-4xl font-cinzel text-white mb-4">The Event Horizon Telescope</h3>
                            <p class="text-zinc-300 text-lg mb-6 leading-relaxed">
                                Using Very Long Baseline Interferometry (VLBI), the EHT turned the Earth into a giant
                                eye. It resolved the shadow of M87* (6.5 billion M☉) and Sgr A* (4 million M☉), proving
                                the existence of the photon ring predicted by relativity.
                            </p>
                            <div class="grid grid-cols-2 gap-4 max-w-md">
                                <div class="border border-white/20 p-4 rounded bg-black/50 backdrop-blur">
                                    <div class="text-xs text-zinc-500 uppercase">Resolution</div>
                                    <div class="text-white font-mono">20 micro-arcsec</div>
                                </div>
                                <div class="border border-white/20 p-4 rounded bg-black/50 backdrop-blur">
                                    <div class="text-xs text-zinc-500 uppercase">Data</div>
                                    <div class="text-white font-mono">5 Petabytes</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- LIGO -->
                    <div
                        class="relative min-h-[60vh] rounded-3xl overflow-hidden flex items-center justify-end text-right group">
                        <div class="absolute inset-0 z-0">
                            <img loading="lazy" src="assets/images/ligo_detector.png"
                                class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105"
                                alt="LIGO">
                            <div class="absolute inset-0 bg-gradient-to-l from-black via-black/80 to-transparent"></div>
                        </div>
                        <div class="relative z-10 p-12 max-w-2xl">
                            <div class="inline-block bg-blue-500 text-black font-bold px-3 py-1 text-xs mb-4">GW150914
                            </div>
                            <h3 class="text-4xl font-cinzel text-white mb-4">LIGO &amp; Gravitational Waves</h3>
                            <p class="text-zinc-300 text-lg mb-6 leading-relaxed">
                                Ripples in the fabric of spacetime caused by the violent merger of black holes. Detected
                                by measuring length changes smaller than a proton using 4km laser arms. It opened a new
                                sense for humanity: we can now "hear" the universe.
                            </p>
                            <div class="flex justify-end gap-4">
                                <div class="border border-white/20 p-4 rounded bg-black/50 backdrop-blur text-left">
                                    <div class="text-xs text-zinc-500 uppercase">Strain Sensitivity</div>
                                    <div class="text-white font-mono">10⁻²¹</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery of Simulations -->
                <div class="mt-20">
                    <h3 class="text-2xl font-cinzel text-white mb-8">Simulation Gallery</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 h-64">
                        <div class="group relative overflow-hidden rounded-xl bg-zinc-900 cursor-pointer">
                            <img loading="lazy" src="assets/images/sim_accretion.png"
                                class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity"
                                alt="Accretion">
                        </div>
                        <div class="group relative overflow-hidden rounded-xl bg-zinc-900 cursor-pointer">
                            <img loading="lazy" src="assets/images/sim_merger.png"
                                class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity"
                                alt="Merger">
                        </div>
                        <div class="group relative overflow-hidden rounded-xl bg-zinc-900 cursor-pointer">
                            <img loading="lazy" src="assets/images/sim_jet.png"
                                class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity"
                                alt="Jet">
                        </div>
                        <div class="group relative overflow-hidden rounded-xl bg-zinc-900 cursor-pointer">
                            <img loading="lazy" src="assets/images/sim_photon_ring.png"
                                class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity"
                                alt="Photon Ring">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- HUD SECTION: Frontier -->
    <section id="frontier" class="hud-section" data-depth-start="9200" data-depth-end="10000">
        <div class="hud-content">
            <div class="max-w-[1400px] mx-auto px-6 relative z-10 py-20">
                <div class="flex items-center gap-6 mb-20">
                    <span
                        class="text-8xl font-cinzel text-white/5 font-bold absolute -left-6 -top-10 select-none">07</span>
                    <div class="relative">
                        <div class="text-xs text-zinc-500 uppercase tracking-[0.2em] mb-2 font-semibold">Module Seven
                        </div>
                        <h2 class="text-5xl md:text-6xl font-semibold tracking-tight">The Frontier</h2>
                    </div>
                </div>

                <div class="grid lg:grid-cols-2 gap-16">
                    <!-- Info Paradox -->
                    <div
                        class="glass-card p-10 rounded-3xl border border-red-500/20 shadow-[0_0_50px_-20px_rgba(255,0,0,0.1)]">
                        <h3 class="text-3xl font-cinzel text-white mb-6">The Information Paradox</h3>
                        <p class="text-zinc-400 mb-6 leading-relaxed text-justify-academic">
                            Quantum Mechanics states information is eternal (Unitary). Relativity states black holes
                            evaporate into random thermal radiation, destroying the information of what fell in. These
                            two pillars of physics contradict each other here.
                        </p>
                        <div class="space-y-4">
                            <div class="bg-black/40 p-4 rounded border-l-2 border-red-500">
                                <h4 class="text-white font-bold text-sm">Solution A: Information Loss</h4>
                                <p class="text-xs text-zinc-500">Quantum mechanics is wrong. Information is destroyed.
                                    (Hawking's original bet)</p>
                            </div>
                            <div class="bg-black/40 p-4 rounded border-l-2 border-green-500">
                                <h4 class="text-white font-bold text-sm">Solution B: Remnants</h4>
                                <p class="text-xs text-zinc-500">Evaporation stops at the Planck scale, leaving a dense
                                    nugget of info.</p>
                            </div>
                            <div class="bg-black/40 p-4 rounded border-l-2 border-blue-500">
                                <h4 class="text-white font-bold text-sm">Solution C: Holography/Islands</h4>
                                <p class="text-xs text-zinc-500">Information is encoded in the radiation via subtle
                                    quantum entanglements.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Firewalls -->
                    <div>
                        <h3 class="text-3xl font-cinzel text-white mb-6">Firewalls &amp; Wormholes</h3>
                        <p class="text-zinc-400 mb-8 leading-relaxed text-justify-academic">
                            To save quantum mechanics, some physicists propose a "Firewall" of high-energy particles at
                            the horizon that incinerates anything attempting to enter. Others suggest "ER=EPR", implying
                            that quantum entanglement (EPR) is connected by microscopic wormholes (ER).
                        </p>
                        <div class="grid grid-cols-2 gap-4">
                            <div
                                class="glass-card p-6 rounded-xl text-center flex flex-col items-center justify-center aspect-square">
                                <i data-lucide="flame" class="w-8 h-8 text-orange-500 mb-4"></i>
                                <span class="font-cinzel text-lg">Firewall</span>
                            </div>
                            <div
                                class="glass-card p-6 rounded-xl text-center flex flex-col items-center justify-center aspect-square">
                                <i data-lucide="link" class="w-8 h-8 text-blue-500 mb-4"></i>
                                <span class="font-cinzel text-lg">ER = EPR</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Journey Complete Message -->
                <div class="mt-20 text-center glass-card p-12 rounded-3xl border border-white/20">
                    <h3 class="text-4xl font-cinzel text-white mb-4">Journey Complete</h3>
                    <p class="text-zinc-400 text-lg mb-8">You have traveled through the cosmos to the edge of
                        understanding.</p>
                    <button onclick="navigateToDepth(0)"
                        class="bg-white text-black px-8 py-4 rounded-full font-bold hover:bg-zinc-200 transition-colors">
                        Return to Origin
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- SCRIPTS -->
    <script>
        lucide.createIcons();

        // ==========================================
        // GLOBAL STATE: DEPTH-BASED NAVIGATION
        // ==========================================
        let currentDepth = 0;
        const maxDepth = 10000;
        const depthSensitivity = 8;
        let targetDepth = 0;
        let isScrolling = false;
        let scrollVelocity = 0;

        // Section depth mappings
        const sections = [
            { id: 'hero', start: 0, end: 800 },
            { id: 'history', start: 800, end: 2500 },
            { id: 'anatomy', start: 2500, end: 4000 },
            { id: 'deep-dive', start: 4000, end: 5500 },
            { id: 'formation', start: 5500, end: 7000 },
            { id: 'thermodynamics', start: 7000, end: 8200 },
            { id: 'evidence', start: 8200, end: 9200 },
            { id: 'frontier', start: 9200, end: 10000 }
        ];

        // ==========================================
        // 0. UTILS: SCRAMBLE TEXT & MAGNETIC
        // ==========================================

        class ScrambleText {
            constructor(element, chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&') {
                this.element = element;
                this.originalText = element.innerText;
                this.chars = chars;
                this.frameId = null;
                this.update = this.update.bind(this);
            }

            start(duration = 1000) {
                const startTime = Date.now();
                const length = this.originalText.length;

                const animate = () => {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);

                    let result = '';
                    const revealIndex = Math.floor(progress * length);

                    for (let i = 0; i < length; i++) {
                        if (i < revealIndex) {
                            result += this.originalText[i];
                        } else if (this.originalText[i] === ' ') {
                            result += ' ';
                        } else {
                            result += this.chars[Math.floor(Math.random() * this.chars.length)];
                        }
                    }

                    this.element.innerText = result;

                    if (progress < 1) {
                        this.frameId = requestAnimationFrame(animate);
                    } else {
                        this.element.innerText = this.originalText;
                    }
                };

                if (this.frameId) cancelAnimationFrame(this.frameId);
                animate();
            }
        }

        // NOTE: Glass card tilt effect is handled in the unified section below
        // Removed duplicate handlers for performance

        // ==========================================
        // 1. HERO BOOT SEQUENCE
        // ==========================================
        window.addEventListener('load', () => {
            const revealElements = document.querySelectorAll('.reveal-text');

            revealElements.forEach((el, index) => {
                setTimeout(() => {
                    el.classList.add('revealed');
                    el.classList.add('glitch-text');
                    el.setAttribute('data-text', el.innerText);

                    if (el.innerText.includes('ZERO') || el.innerText.includes('INFINITY') || el.innerText.includes('TO')) {
                        new ScrambleText(el).start(1500);
                    }

                    setTimeout(() => {
                        el.classList.remove('glitch-text');
                    }, 2000);

                }, 500 + (index * 400));
            });

            setTimeout(() => {
                const btn = document.getElementById('hero-buttons');
                if (btn) {
                    btn.style.transition = 'opacity 2s ease';
                    btn.style.opacity = '1';
                }
            }, 3000);
        });

        // ==========================================
        // 2. 3D TUNNEL SCENE (THREE.JS)
        // ==========================================
        const tunnelContainer = document.getElementById('tunnel-scene');
        let tunnelCamera, tunnelScene, tunnelRenderer;
        let stars, tunnelRings;
        let nebulae, sparkles; // Additional particle systems

        // Mouse position for parallax effect
        let mouseX = 0, mouseY = 0;
        let targetMouseX = 0, targetMouseY = 0;

        // Track mouse movement for parallax
        document.addEventListener('mousemove', (e) => {
            targetMouseX = (e.clientX / window.innerWidth - 0.5) * 2;
            targetMouseY = (e.clientY / window.innerHeight - 0.5) * 2;
        });

        if (tunnelContainer) {
            // ==========================================
            // PERFORMANCE TIER DETECTION - DUAL-STATE ARCHITECTURE
            // ==========================================
            // State A (DESKTOP): Full cinematic luxury
            // State B (MOBILE): Ruthless efficiency for 60 FPS
            const performanceTier = (function () {
                const isMobileUA = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                const isSmallScreen = window.innerWidth < 768;
                const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                return (isMobileUA || isSmallScreen || isTouchDevice) ? 'MOBILE' : 'DESKTOP';
            })();

            console.log(`🎮 Performance Tier: ${performanceTier}`);

            // Desktop vs Mobile configuration
            const config = performanceTier === 'MOBILE' ? {
                starsCount: 100,           // NUCLEAR: -97.5% from 4000
                inflowCount: 0,            // NUCLEAR: Disabled on mobile
                ringCount: 5,              // NUCLEAR: -80% from 25
                ringSegments: 16,          // -75% from 64
                sphereSegments: 16,        // -75% from 64
                pixelRatio: 1.0,           // -50% from 2.0
                antialias: false,          // GPU saver
                particleSize: 0.8          // Larger = fewer needed
            } : {
                starsCount: 4000,
                inflowCount: 150,
                ringCount: 25,
                ringSegments: 64,
                sphereSegments: 64,
                pixelRatio: Math.min(window.devicePixelRatio, 2),
                antialias: true,
                particleSize: 0.3
            };

            tunnelScene = new THREE.Scene();
            tunnelCamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
            tunnelRenderer = new THREE.WebGLRenderer({ alpha: true, antialias: config.antialias });
            tunnelRenderer.setSize(window.innerWidth, window.innerHeight);
            tunnelRenderer.setPixelRatio(config.pixelRatio);
            tunnelContainer.appendChild(tunnelRenderer.domElement);

            // Create starfield with config-driven count
            const starsGeometry = new THREE.BufferGeometry();
            const starsCount = config.starsCount;
            const posArray = new Float32Array(starsCount * 3);
            const velocityArray = new Float32Array(starsCount);

            for (let i = 0; i < starsCount * 3; i += 3) {
                // Distribute stars in a cylinder around the camera path
                const angle = Math.random() * Math.PI * 2;
                const radius = 5 + Math.random() * 50;
                posArray[i] = Math.cos(angle) * radius;     // x
                posArray[i + 1] = Math.sin(angle) * radius;   // y
                posArray[i + 2] = Math.random() * 2000 - 1000; // z (deep tunnel)
                velocityArray[i / 3] = 0.5 + Math.random() * 0.5;
            }

            starsGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

            const starMaterial = new THREE.PointsMaterial({
                size: config.particleSize,
                color: 0xffffff,
                transparent: true,
                opacity: 0.9,
                sizeAttenuation: true
            });

            stars = new THREE.Points(starsGeometry, starMaterial);
            tunnelScene.add(stars);

            // === CLEAN VORTEX TUNNEL ===
            // Fewer rings, unified orange-red color (like M87*)
            tunnelRings = new THREE.Group();
            const ringCount = config.ringCount;
            const ringSegments = config.ringSegments;
            for (let i = 0; i < ringCount; i++) {
                const progress = i / ringCount;
                const baseRadius = 50 - progress * 35; // Funnel from 50 to 15
                const innerR = Math.max(8, baseRadius - 2);
                const outerR = Math.max(10, baseRadius);

                const ringGeometry = new THREE.RingGeometry(innerR, outerR, ringSegments);

                // Unified monochrome color scheme: white -> silver -> dark grey
                const hue = 0.0; // Monochrome
                const saturation = 0.0;
                const lightness = 0.8 - progress * 0.6; // White to dark gray
                const color = new THREE.Color().setHSL(hue, saturation, lightness);

                const ringMaterial = new THREE.MeshBasicMaterial({
                    color: color,
                    side: THREE.DoubleSide,
                    transparent: true,
                    opacity: 0.15 + progress * 0.35 // More visible toward center
                });
                const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                ring.position.z = -i * 25; // Spaced out more
                tunnelRings.add(ring);
            }
            tunnelScene.add(tunnelRings);

            // === INWARD-FLOWING PARTICLES (shows suction) ===
            const inflowGeometry = new THREE.BufferGeometry();
            const inflowCount = config.inflowCount;
            const inflowPositions = new Float32Array(inflowCount * 3);
            const inflowVelocities = new Float32Array(inflowCount); // Speed toward center
            const inflowAngles = new Float32Array(inflowCount); // Starting angle
            const inflowRadii = new Float32Array(inflowCount); // Current radius

            for (let i = 0; i < inflowCount; i++) {
                inflowAngles[i] = Math.random() * Math.PI * 2;
                inflowRadii[i] = 20 + Math.random() * 60; // Start at outer edge
                inflowVelocities[i] = 0.1 + Math.random() * 0.3;

                const i3 = i * 3;
                inflowPositions[i3] = Math.cos(inflowAngles[i]) * inflowRadii[i];
                inflowPositions[i3 + 1] = Math.sin(inflowAngles[i]) * inflowRadii[i];
                inflowPositions[i3 + 2] = Math.random() * 800 - 400;
            }

            inflowGeometry.setAttribute('position', new THREE.BufferAttribute(inflowPositions, 3));

            const inflowMaterial = new THREE.PointsMaterial({
                size: 2,
                color: 0xffffff, // Silver/White
                transparent: true,
                opacity: 0.7,
                blending: THREE.AdditiveBlending
            });

            const inflowParticles = new THREE.Points(inflowGeometry, inflowMaterial);
            tunnelScene.add(inflowParticles);

            // === BLACK HOLE DESTINATION ===
            // Main black sphere
            const bhGeometry = new THREE.SphereGeometry(20, config.sphereSegments, config.sphereSegments);
            const bhMaterial = new THREE.MeshBasicMaterial({ color: 0x000000 });
            const blackHole = new THREE.Mesh(bhGeometry, bhMaterial);
            blackHole.position.z = -700;
            tunnelScene.add(blackHole);

            // === BRIGHT EVENT HORIZON (key focal point) ===
            const horizonGeometry = new THREE.RingGeometry(21, 28, config.ringSegments);
            const horizonMaterial = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 0.95
            });
            const eventHorizonRing = new THREE.Mesh(horizonGeometry, horizonMaterial);
            eventHorizonRing.position.z = -700;
            tunnelScene.add(eventHorizonRing);

            // Outer glow halo
            const haloGeometry = new THREE.RingGeometry(28, 60, config.ringSegments);
            const haloMaterial = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 0.4
            });
            const haloRing = new THREE.Mesh(haloGeometry, haloMaterial);
            haloRing.position.z = -700;
            tunnelScene.add(haloRing);

            // Accretion disk (tilted for 3D effect)
            const diskGeometry = new THREE.RingGeometry(25, 100, config.ringSegments);
            const diskMaterial = new THREE.MeshBasicMaterial({
                color: 0xcccccc,
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 0.35
            });
            const accretionDisk = new THREE.Mesh(diskGeometry, diskMaterial);
            accretionDisk.position.z = -700;
            accretionDisk.rotation.x = Math.PI / 2.5;
            tunnelScene.add(accretionDisk);

            // Photon ring (bright thin ring)
            const photonRingGeometry = new THREE.TorusGeometry(23, 0.8, 16, 100);
            const photonRingMaterial = new THREE.MeshBasicMaterial({
                color: 0xffffff,
                transparent: true,
                opacity: 1
            });
            const photonRing = new THREE.Mesh(photonRingGeometry, photonRingMaterial);
            photonRing.position.z = -700;
            photonRing.rotation.x = Math.PI / 2;
            tunnelScene.add(photonRing);

            tunnelCamera.position.z = 100;

            // OPTIMIZATION: Cache DOM element outside loop
            const speedLinesEl = document.getElementById('speedLines');
            let frameCount = 0;
            let lastVelocity = 0;

            // Animation loop (OPTIMIZED)
            function animateTunnel() {
                requestAnimationFrame(animateTunnel);
                frameCount++;

                // Smooth depth interpolation
                currentDepth += (targetDepth - currentDepth) * 0.08;

                // Update camera Z based on depth
                const normalizedDepth = currentDepth / maxDepth;
                tunnelCamera.position.z = 100 - normalizedDepth * 1300;

                // Calculate scroll velocity for effects
                const depthDelta = Math.abs(targetDepth - currentDepth);
                scrollVelocity = depthDelta * 0.01;

                // OPTIMIZATION: Skip heavy updates if not scrolling (velocity near zero)
                const isScrolling = scrollVelocity > 0.001;

                // Update star positions only when scrolling
                if (isScrolling) {
                    const positions = starsGeometry.attributes.position.array;
                    const camZ = tunnelCamera.position.z;
                    for (let i = 0; i < starsCount; i++) {
                        const i3 = i * 3;
                        positions[i3 + 2] += scrollVelocity * velocityArray[i] * 2;

                        if (positions[i3 + 2] > camZ + 100) {
                            positions[i3 + 2] = camZ - 800;
                            const angle = Math.random() * 6.283; // Pre-calculated PI*2
                            const radius = 5 + Math.random() * 50;
                            positions[i3] = Math.cos(angle) * radius;
                            positions[i3 + 1] = Math.sin(angle) * radius;
                        }
                    }
                    starsGeometry.attributes.position.needsUpdate = true;
                    starMaterial.size = 0.3 + scrollVelocity * 0.5;
                }

                // Rotate tunnel rings (always, but minimal when not scrolling)
                if (tunnelRings) {
                    const rotSpeed = isScrolling ? (0.002 + scrollVelocity * 0.008) : 0.001;
                    tunnelRings.rotation.z += rotSpeed;

                    // OPTIMIZATION: Update individual rings only every 2nd frame
                    if (frameCount & 1) {
                        const rings = tunnelRings.children;
                        const len = rings.length;
                        for (let ri = 0; ri < len; ri++) {
                            rings[ri].rotation.z += 0.0008 * (ri & 1 ? -0.5 : 1);
                        }
                    }
                }

                // Inward particles - update only when scrolling
                if (inflowParticles && isScrolling) {
                    const inflowPos = inflowGeometry.attributes.position.array;
                    const camZ = tunnelCamera.position.z;
                    for (let i = 0; i < inflowCount; i++) {
                        inflowRadii[i] -= inflowVelocities[i] * (0.5 + scrollVelocity * 2);
                        inflowAngles[i] += 0.02 + inflowVelocities[i] * 0.05;

                        if (inflowRadii[i] < 5) {
                            inflowRadii[i] = 20 + Math.random() * 60;
                            inflowAngles[i] = Math.random() * 6.283;
                        }

                        const i3 = i * 3;
                        inflowPos[i3] = Math.cos(inflowAngles[i]) * inflowRadii[i];
                        inflowPos[i3 + 1] = Math.sin(inflowAngles[i]) * inflowRadii[i];
                        inflowPos[i3 + 2] += scrollVelocity * 0.8;
                        if (inflowPos[i3 + 2] > camZ + 50) {
                            inflowPos[i3 + 2] = camZ - 500;
                        }
                    }
                    inflowGeometry.attributes.position.needsUpdate = true;
                    inflowMaterial.opacity = 0.5 + scrollVelocity * 0.3;
                }

                // Rotate accretion disk (always, it's cheap)
                accretionDisk.rotation.z += 0.003 + scrollVelocity * 0.008;
                photonRing.rotation.z -= 0.005;

                // OPTIMIZATION: Update glow only every 4th frame
                if ((frameCount & 3) === 0) {
                    const time = frameCount * 0.016; // Approximate time
                    horizonMaterial.opacity = 0.8 + Math.sin(time * 2) * 0.15;
                    haloMaterial.opacity = 0.3 + Math.sin(time * 1.5) * 0.1;
                }

                // Mouse parallax
                mouseX += (targetMouseX - mouseX) * 0.05;
                mouseY += (targetMouseY - mouseY) * 0.05;
                tunnelCamera.position.x = mouseX * 8;
                tunnelCamera.position.y = -mouseY * 5;
                tunnelCamera.lookAt(0, 0, tunnelCamera.position.z - 100);

                if (stars) {
                    stars.rotation.x = mouseY * 0.1;
                    stars.rotation.y = mouseX * 0.1;
                }

                // OPTIMIZATION: Toggle speed lines only when velocity changes significantly
                if (speedLinesEl && Math.abs(scrollVelocity - lastVelocity) > 0.1) {
                    speedLinesEl.classList.toggle('active', scrollVelocity > 0.5);
                    lastVelocity = scrollVelocity;
                }

                tunnelRenderer.render(tunnelScene, tunnelCamera);
            }
            animateTunnel();

            window.addEventListener('resize', () => {
                tunnelCamera.aspect = window.innerWidth / window.innerHeight;
                tunnelCamera.updateProjectionMatrix();
                tunnelRenderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        // ==========================================
        // 3. SCROLL → DEPTH NAVIGATION (Smart Scroll)
        // ==========================================
        document.addEventListener('wheel', (e) => {
            // Find the currently active HUD section
            const activeSection = document.querySelector('.hud-section.active');

            if (activeSection) {
                // Check if the scroll target is inside the active section
                const isInsideSection = activeSection.contains(e.target);

                if (isInsideSection) {
                    // Check if section has scrollable content
                    const scrollableContent = activeSection.querySelector('.hud-content');
                    if (scrollableContent) {
                        const scrollTop = activeSection.scrollTop;
                        const scrollHeight = activeSection.scrollHeight;
                        const clientHeight = activeSection.clientHeight;
                        const isScrollable = scrollHeight > clientHeight;

                        if (isScrollable) {
                            // Scrolling down and not at bottom
                            if (e.deltaY > 0 && scrollTop + clientHeight < scrollHeight - 5) {
                                // Allow normal scroll inside section
                                return;
                            }
                            // Scrolling up and not at top
                            if (e.deltaY < 0 && scrollTop > 5) {
                                // Allow normal scroll inside section
                                return;
                            }
                        }
                    }
                }
            }

            // If we reach here, handle depth navigation
            e.preventDefault();

            // Hide scroll hint after first scroll
            const scrollHint = document.getElementById('scrollHint');
            if (scrollHint && !scrollHint.classList.contains('hidden')) {
                scrollHint.classList.add('hidden');
            }

            // Update target depth based on scroll
            targetDepth = Math.max(0, Math.min(maxDepth, targetDepth + e.deltaY * depthSensitivity / 10));

            // Update HUD sections
            updateHUD(currentDepth);

            // Update depth indicator
            updateDepthIndicator(currentDepth);

        }, { passive: false });

        // ==========================================
        // 3.5 TOUCH NAVIGATION (Mobile Support)
        // ==========================================
        let touchStartY = 0;
        let touchStartTime = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartY = e.touches[0].clientY;
            touchStartTime = Date.now();
            // Instant speed lines feedback on touch
            const speedLines = document.getElementById('speedLines');
            if (speedLines) speedLines.classList.add('active');
        }, { passive: true });

        document.addEventListener('touchmove', (e) => {
            const touchY = e.touches[0].clientY;
            const deltaY = touchStartY - touchY;

            // Check if inside scrollable section content
            const activeSection = document.querySelector('.hud-section.active');
            if (activeSection) {
                const scrollTop = activeSection.scrollTop;
                const scrollHeight = activeSection.scrollHeight;
                const clientHeight = activeSection.clientHeight;
                const isScrollable = scrollHeight > clientHeight + 10;

                if (isScrollable) {
                    // Allow native scroll if not at boundaries
                    if (deltaY > 0 && scrollTop + clientHeight < scrollHeight - 5) return;
                    if (deltaY < 0 && scrollTop > 5) return;
                }
            }

            // Handle depth navigation
            e.preventDefault();

            // Hide scroll hint
            const scrollHint = document.getElementById('scrollHint');
            if (scrollHint && !scrollHint.classList.contains('hidden')) {
                scrollHint.classList.add('hidden');
            }

            // Update depth - HYPER SENSITIVITY for mobile (5x multiplier)
            targetDepth = Math.max(0, Math.min(maxDepth, targetDepth + deltaY * 5.0));
            touchStartY = touchY;

            // Update HUD
            updateHUD(currentDepth);
            updateDepthIndicator(currentDepth);

        }, { passive: false });

        document.addEventListener('touchend', (e) => {
            // Momentum for fast swipes
            const touchDuration = Date.now() - touchStartTime;
            if (touchDuration < 150) {
                const lastTouch = e.changedTouches[0];
                const velocity = (touchStartY - lastTouch.clientY) / touchDuration;
                targetDepth = Math.max(0, Math.min(maxDepth, targetDepth + velocity * 800));
            }
        }, { passive: true });

        // ==========================================
        // 4. HUD OVERLAY CONTROLLER
        // ==========================================
        function updateHUD(depth) {
            sections.forEach(s => {
                const el = document.getElementById(s.id);
                if (!el) return;

                const fadeRange = 200; // Depth units for fade in/out

                if (depth >= s.start - fadeRange && depth <= s.end + fadeRange) {
                    // Calculate opacity based on position within section
                    let opacity = 1;

                    if (depth < s.start) {
                        // Fading in
                        opacity = 1 - (s.start - depth) / fadeRange;
                    } else if (depth > s.end) {
                        // Fading out
                        opacity = 1 - (depth - s.end) / fadeRange;
                    }

                    opacity = Math.max(0, Math.min(1, opacity));

                    if (opacity > 0) {
                        el.classList.add('active');
                        el.style.opacity = opacity;
                    } else {
                        el.classList.remove('active');
                        el.style.opacity = 0;
                    }
                } else {
                    el.classList.remove('active');
                    el.style.opacity = 0;
                }
            });

            // Update depth markers
            document.querySelectorAll('.depth-marker').forEach(marker => {
                const sectionId = marker.dataset.section;
                const section = sections.find(s => s.id === sectionId);
                if (section && depth >= section.start && depth <= section.end) {
                    marker.classList.add('active');
                } else {
                    marker.classList.remove('active');
                }
            });
        }

        function updateDepthIndicator(depth) {
            const progress = document.getElementById('depthProgress');
            if (progress) {
                const percentage = (depth / maxDepth) * 100;
                progress.style.height = percentage + '%';
            }
        }

        // ==========================================
        // 5. NAVIGATION CLICK HANDLERS
        // ==========================================
        function navigateToDepth(depth) {
            targetDepth = Math.max(0, Math.min(maxDepth, depth));
        }

        // Nav link clicks
        document.querySelectorAll('[data-nav-section]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.dataset.navSection;
                const section = sections.find(s => s.id === sectionId);
                if (section) {
                    navigateToDepth(section.start + 100);
                }
            });
        });

        // Home link
        const homeLink = document.querySelector('[data-nav-home]');
        if (homeLink) {
            homeLink.addEventListener('click', (e) => {
                e.preventDefault();
                navigateToDepth(0);
            });
        }

        // Depth marker clicks
        document.querySelectorAll('.depth-marker').forEach(marker => {
            marker.addEventListener('click', () => {
                const sectionId = marker.dataset.section;
                const section = sections.find(s => s.id === sectionId);
                if (section) {
                    navigateToDepth(section.start + 100);
                }
            });
        });

        // ==========================================
        // 6. HORIZONTAL TIMELINE KEYBOARD NAV
        // ==========================================
        const timelineContainer = document.querySelector('.horizontal-timeline-container');
        if (timelineContainer) {
            document.addEventListener('keydown', (e) => {
                // Only handle if history section is active
                const historySection = document.getElementById('history');
                if (historySection && historySection.classList.contains('active')) {
                    if (e.key === 'ArrowLeft') {
                        timelineContainer.scrollLeft -= 320;
                    } else if (e.key === 'ArrowRight') {
                        timelineContainer.scrollLeft += 320;
                    }
                }
            });

            // Prevent wheel from triggering depth navigation when over timeline
            timelineContainer.addEventListener('wheel', (e) => {
                e.stopPropagation();
                timelineContainer.scrollLeft += e.deltaY;
            }, { passive: false });
        }

        // ==========================================
        // 7. BLACK HOLE VISUALIZER (Anatomy Section)
        // ==========================================
        const canvas = document.getElementById('blackhole-canvas');
        const container = document.getElementById('blackhole-wrapper');

        if (canvas && container) {
            const bhScene = new THREE.Scene();
            const bhCamera = new THREE.PerspectiveCamera(60, container.clientWidth / container.clientHeight, 0.1, 1000);
            const bhRenderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });

            const updateSize = () => {
                const w = container.clientWidth;
                const h = container.clientHeight;
                bhRenderer.setSize(w, h);
                bhCamera.aspect = w / h;
                bhCamera.updateProjectionMatrix();
            };
            updateSize();
            window.addEventListener('resize', updateSize);

            // Black Hole Mesh Construction
            const eventHorizon = new THREE.Mesh(
                new THREE.SphereGeometry(1, 64, 64),
                new THREE.MeshBasicMaterial({ color: 0x000000 })
            );
            bhScene.add(eventHorizon);

            // Photon Ring (Gold)
            const photonRing = new THREE.Mesh(
                new THREE.TorusGeometry(1.5, 0.02, 16, 100),
                new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.9 })
            );
            photonRing.rotation.x = Math.PI / 2;
            bhScene.add(photonRing);

            // Accretion Disk
            const diskParticles = new THREE.BufferGeometry();
            const diskCount = 1000; // OPTIMIZED: Reduced from 2000
            const diskPosArray = new Float32Array(diskCount * 3);
            const diskColorArray = new Float32Array(diskCount * 3);

            const colorInside = new THREE.Color(0xffffff);
            const colorOutside = new THREE.Color(0x333333);

            for (let i = 0; i < diskCount; i++) {
                const angle = Math.random() * Math.PI * 2;
                const radius = 2.0 + Math.random() * 3.5;

                diskPosArray[i * 3] = Math.cos(angle) * radius;
                diskPosArray[i * 3 + 1] = (Math.random() - 0.5) * 0.1;
                diskPosArray[i * 3 + 2] = Math.sin(angle) * radius;

                const t = (radius - 2.0) / 3.5;
                const finalColor = colorInside.clone().lerp(colorOutside, t);
                diskColorArray[i * 3] = finalColor.r;
                diskColorArray[i * 3 + 1] = finalColor.g;
                diskColorArray[i * 3 + 2] = finalColor.b;
            }

            diskParticles.setAttribute('position', new THREE.BufferAttribute(diskPosArray, 3));
            diskParticles.setAttribute('color', new THREE.BufferAttribute(diskColorArray, 3));

            const diskMaterial = new THREE.PointsMaterial({
                size: 0.05,
                vertexColors: true,
                transparent: true,
                opacity: 0.8,
                blending: THREE.AdditiveBlending
            });

            const accretionDiskMesh = new THREE.Points(diskParticles, diskMaterial);
            accretionDiskMesh.rotation.x = 0.2;
            accretionDiskMesh.rotation.z = 0.1;
            bhScene.add(accretionDiskMesh);

            bhCamera.position.z = 6;
            bhCamera.position.y = 1;
            bhCamera.lookAt(0, 0, 0);

            // OPTIMIZATION: Only animate when section is visible
            let bhAnimating = false;

            function animateBH() {
                if (!bhAnimating) return;
                requestAnimationFrame(animateBH);
                accretionDiskMesh.rotation.y -= 0.005;
                photonRing.lookAt(bhCamera.position);
                bhRenderer.render(bhScene, bhCamera);
            }

            // Start/stop animation based on visibility
            const bhObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    bhAnimating = entry.isIntersecting;
                    if (bhAnimating) animateBH();
                });
            }, { threshold: 0.1 });

            bhObserver.observe(container);
        }

        // ==========================================
        // 8. INITIAL STATE
        // ==========================================
        updateHUD(0);
        updateDepthIndicator(0);

        // ==========================================
        // 9. ENHANCED DYNAMIC ANIMATIONS
        // ==========================================

        // Reveal text animation on load
        setTimeout(() => {
            document.querySelectorAll('.reveal-text').forEach((el, i) => {
                setTimeout(() => {
                    el.classList.add('revealed');
                }, i * 200);
            });
        }, 500);

        // Staggered animation for glossary and grid items
        function staggerAnimateElements(selector, delay = 100) {
            const elements = document.querySelectorAll(selector);
            elements.forEach((el, i) => {
                el.style.animationDelay = `${i * delay}ms`;
            });
        }

        staggerAnimateElements('#deep-dive .grid .glass-card', 80);
        staggerAnimateElements('#anatomy .grid .glass-card', 100);
        staggerAnimateElements('.key-figures-grid > div', 150);

        // Optimized glass card tilt (throttled)
        let tiltThrottle = false;
        document.querySelectorAll('.glass-card').forEach(card => {
            card.addEventListener('mousemove', (e) => {
                if (tiltThrottle) return;
                tiltThrottle = true;
                requestAnimationFrame(() => {
                    const rect = card.getBoundingClientRect();
                    const x = ((e.clientX - rect.left) / rect.width) * 100;
                    const y = ((e.clientY - rect.top) / rect.height) * 100;
                    card.style.setProperty('--mouse-x', `${x}%`);
                    card.style.setProperty('--mouse-y', `${y}%`);
                    tiltThrottle = false;
                });
            });
        });

        // Data bar fill on visibility (lightweight)
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const bars = entry.target.querySelectorAll('.data-bar-fill');
                    for (let i = 0; i < bars.length; i++) {
                        bars[i].style.transitionDelay = `${i * 150}ms`;
                    }
                    observer.unobserve(entry.target); // Stop observing after triggered
                }
            });
        }, { threshold: 0.3 });

        document.querySelectorAll('.hud-section').forEach(section => observer.observe(section));

        console.log('🌌 Optimized animations initialized!');

        // ==========================================
        // 10. MOBILE MENU FUNCTIONALITY
        // ==========================================
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenuClose = document.getElementById('mobile-menu-close');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.add('open');
                document.body.style.overflow = 'hidden';
            });

            if (mobileMenuClose) {
                mobileMenuClose.addEventListener('click', () => {
                    mobileMenu.classList.remove('open');
                    document.body.style.overflow = '';
                });
            }

            // Mobile nav section links
            document.querySelectorAll('[data-mobile-nav]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = link.dataset.mobileNav;
                    const section = sections.find(s => s.id === sectionId);
                    if (section) {
                        navigateToDepth(section.start + 100);
                    }
                    mobileMenu.classList.remove('open');
                    document.body.style.overflow = '';
                });
            });

            // Close on swipe right
            let menuTouchStartX = 0;
            mobileMenu.addEventListener('touchstart', (e) => {
                menuTouchStartX = e.touches[0].clientX;
            }, { passive: true });

            mobileMenu.addEventListener('touchend', (e) => {
                const deltaX = e.changedTouches[0].clientX - menuTouchStartX;
                if (deltaX > 100) {
                    mobileMenu.classList.remove('open');
                    document.body.style.overflow = '';
                }
            }, { passive: true });
        }

        // ==========================================
        // 11. TIMELINE TOUCH DRAG SCROLL
        // ==========================================
        const timelineContainerTouch = document.querySelector('.horizontal-timeline-container');
        if (timelineContainerTouch) {
            let isTimelineDragging = false;
            let timelineStartX = 0;
            let timelineScrollLeft = 0;

            timelineContainerTouch.addEventListener('touchstart', (e) => {
                isTimelineDragging = true;
                timelineStartX = e.touches[0].pageX - timelineContainerTouch.offsetLeft;
                timelineScrollLeft = timelineContainerTouch.scrollLeft;
            }, { passive: true });

            timelineContainerTouch.addEventListener('touchmove', (e) => {
                if (!isTimelineDragging) return;
                e.preventDefault();
                const x = e.touches[0].pageX - timelineContainerTouch.offsetLeft;
                const walk = (timelineStartX - x) * 1.5;
                timelineContainerTouch.scrollLeft = timelineScrollLeft + walk;
            }, { passive: false });

            timelineContainerTouch.addEventListener('touchend', () => {
                isTimelineDragging = false;
            }, { passive: true });

            // Mouse drag for touchpad/mouse users
            let isMouseDragging = false;
            timelineContainerTouch.addEventListener('mousedown', (e) => {
                isMouseDragging = true;
                timelineContainerTouch.style.cursor = 'grabbing';
                timelineStartX = e.pageX - timelineContainerTouch.offsetLeft;
                timelineScrollLeft = timelineContainerTouch.scrollLeft;
            });

            timelineContainerTouch.addEventListener('mousemove', (e) => {
                if (!isMouseDragging) return;
                e.preventDefault();
                const x = e.pageX - timelineContainerTouch.offsetLeft;
                const walk = (timelineStartX - x) * 1.5;
                timelineContainerTouch.scrollLeft = timelineScrollLeft + walk;
            });

            timelineContainerTouch.addEventListener('mouseup', () => {
                isMouseDragging = false;
                timelineContainerTouch.style.cursor = 'grab';
            });

            timelineContainerTouch.addEventListener('mouseleave', () => {
                isMouseDragging = false;
                timelineContainerTouch.style.cursor = 'grab';
            });

            timelineContainerTouch.style.cursor = 'grab';
        }

        // ==========================================
        // 12. GLASS CARD TOUCH SPOTLIGHT
        // ==========================================
        document.querySelectorAll('.glass-card').forEach(card => {
            card.addEventListener('touchmove', (e) => {
                const touch = e.touches[0];
                const rect = card.getBoundingClientRect();
                const x = ((touch.clientX - rect.left) / rect.width) * 100;
                const y = ((touch.clientY - rect.top) / rect.height) * 100;
                card.style.setProperty('--mouse-x', `${x}%`);
                card.style.setProperty('--mouse-y', `${y}%`);
            }, { passive: true });

            card.addEventListener('touchend', () => {
                // Reset to center after touch ends
                card.style.setProperty('--mouse-x', '50%');
                card.style.setProperty('--mouse-y', '50%');
            }, { passive: true });
        });

        // ==========================================
        // 13. TOUCHPAD SCROLL OPTIMIZATION
        // ==========================================
        // Detect touchpad via deltaMode and adjust sensitivity
        document.addEventListener('wheel', (e) => {
            // deltaMode 0 = pixels (touchpad), 1 = lines (mouse wheel)
            if (e.deltaMode === 0 && Math.abs(e.deltaY) < 50) {
                // This is likely a touchpad - sensitivity is already good
                // The existing wheel handler works fine
            }
        }, { passive: true });

        // Re-initialize Lucide icons for new mobile menu
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }

        console.log('📱 Mobile & touch support initialized!');
    </script>

    <!-- UnicornStudio WebGL Shader Library -->
    <script
        src="https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v1.4.36/dist/unicornStudio.umd.js"></script>
    <script>
        if (window.UnicornStudio) {
            UnicornStudio.init();
        }
    </script>
</body>

</html>